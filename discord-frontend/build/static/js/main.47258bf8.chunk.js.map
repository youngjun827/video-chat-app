{"version":3,"sources":["shared/components/AuthBox.js","shared/components/CustomPrimaryButton.js","shared/components/RedirectInfo.js","authPages/LoginPage/LoginPageFooter.js","authPages/LoginPage/LoginPageHeader.js","shared/components/InputWithLabel.js","authPages/LoginPage/LoginPageInputs.js","shared/utils/validators.js","shared/utils/auth.js","api.js","store/actions/alertActions.js","store/actions/authActions.js","authPages/LoginPage/LoginPage.js","authPages/RegisterPage/RegisterPageInputs.js","authPages/RegisterPage/RegisterPageFooter.js","authPages/RegisterPage/RegisterPage.js","assets/JOO_white.png","Dashboard/SideBar/MainPageButton.js","store/reducers/authReducer.js","store/reducers/alertReducer.js","store/actions/friendsActions.js","store/reducers/friendsReducer.js","store/actions/chatActions.js","store/reducers/chatReducer.js","store/actions/roomActions.js","store/reducers/roomReducer.js","store/store.js","shared/utils/chat.js","realtimeCommunication/webRTCHandler.js","realtimeCommunication/socketConnection.js","realtimeCommunication/roomHandler.js","Dashboard/SideBar/CreateRoomButton.js","shared/components/Avatar.js","Dashboard/SideBar/ActiveRoomButton.js","Dashboard/SideBar/SideBar.js","Dashboard/FriendsSideBar/AddFriendDialog.js","Dashboard/FriendsSideBar/AddFriendButton.js","Dashboard/FriendsSideBar/FriendsTitle.js","Dashboard/FriendsSideBar/FriendsList/OnlineIndicator.js","Dashboard/FriendsSideBar/FriendsList/FriendsListItem.js","Dashboard/FriendsSideBar/FriendsList/FriendsList.js","Dashboard/FriendsSideBar/PendingInvitationsList/InvitationDecisionButtons.js","Dashboard/FriendsSideBar/PendingInvitationsList/PendingInvitationsListItem.js","Dashboard/FriendsSideBar/PendingInvitationsList/PendingInvitationsList.js","Dashboard/FriendsSideBar/FriendsSideBar.js","Dashboard/Messenger/WelcomeMessage.js","Dashboard/Messenger/Messages/MessagesHeader.js","Dashboard/Messenger/Messages/Message.js","Dashboard/Messenger/Messages/DateSeparator.js","Dashboard/Messenger/Messages/Messages.js","Dashboard/Messenger/NewMessageInput.js","Dashboard/Messenger/MessengerContent.js","Dashboard/Messenger/Messenger.js","Dashboard/AppBar/DropdownMenu.js","Dashboard/AppBar/ChosenOptionLabel.js","Dashboard/AppBar/AppBar.js","Dashboard/Room/ResizeRoomButton.js","Dashboard/Room/Video.js","Dashboard/Room/VideosContainer.js","Dashboard/Room/RoomButtons/CameraButton.js","Dashboard/Room/RoomButtons/MicButton.js","Dashboard/Room/RoomButtons/CloseRoomButton.js","Dashboard/Room/RoomButtons/ScreenShareButton.js","Dashboard/Room/RoomButtons/RoomButtons.js","Dashboard/Room/Room.js","Dashboard/Dashboard.js","shared/components/AlertNotification.js","App.js","serviceWorker.js","index.js"],"names":["BoxWrapper","styled","width","height","display","alignItems","justifyContent","background","AuthBox","props","Box","sx","bgcolor","borderRadius","boxShadow","flexDirection","padding","children","CustomPrimaryButton","label","additionalStyles","disabled","onClick","Button","variant","color","textTransform","fontSize","fontWeight","style","RedirectText","cursor","RedirectInfo","text","redirectText","redirectHandler","Typography","LoginPageFooter","handleLogin","isFormValid","history","useHistory","Tooltip","title","marginTop","backgroundColor","push","LoginPageHeader","Wrapper","Label","Input","flexGrow","border","margin","InputWithLabel","value","setValue","type","placeholder","onChange","event","target","LoginPageInputs","mail","setMail","password","setPassword","validateMail","test","validatePassword","length","validateUsername","username","logout","localStorage","clear","window","location","pathname","apiClient","axios","create","baseURL","interceptors","request","use","config","userDetails","getItem","token","JSON","parse","headers","Authorization","err","Promise","reject","login","data","post","error","exception","register","sendFriendInvitation","checkResponseCode","acceptFriendInvitation","rejectFriendInvitation","responseCode","response","status","alertActions","OPEN_ALERT_MESSAGE","CLOSE_ALERT_MESSAGE","openAlertMessage","content","closeAlertMessage","authActions","getActions","dispatch","setUserDetails","api","console","log","setItem","stringify","connect","useState","setIsFormValid","useEffect","isMailValid","isPasswordValid","validateLoginForm","RegisterPageInputs","setUsername","RegisterPageFooter","handleRegister","validateRegisterForm","MainPageButton","minWidth","src","Logo","initState","reducer","state","action","showAlertMessage","alertMessageContent","friendsActions","closeDialogHandler","friends","pendingFriendsInvitations","onlineUsers","chatTypes","chatActions","setChosenChatDetails","chatDetails","chatType","chosenChatDetails","messages","roomActions","setOpenRoom","isUserRoomCreator","isUserInRoom","setAudioOnly","audioOnly","setScreenSharingStream","stream","setRoomDetails","roomDetails","setLocalStream","localStream","setRemoteStreams","remoteStreams","isScreenSharingActive","screenSharingStream","setIsUserJoinedOnlyWithAudio","onlyWithAudio","isUserJoinedWithOnlyAudio","activeRooms","rootReducer","combineReducers","auth","authReducer","alert","alertReducer","friendsReducer","chat","chatReducer","room","roomReducer","store","createStore","composeWithDevTools","applyMiddleware","thunk","updateChatHistoryIfSameConversationActive","participants","usersInCoversation","every","participantId","includes","setMessages","onlyAudioConstraints","audio","video","defaultConstraints","getLocalStreamPreview","onlyAudio","callbackFunc","constraints","navigator","mediaDevices","getUserMedia","then","catch","peers","prepareNewPeerConnection","connUserSocketId","isInitiator","getState","Peer","initiator","warn","iceServers","urls","on","socketConnection","signal","remoteStream","addNewRemoteStream","newRemoteStreams","switchOutgoingTracks","socket_id","index","streams","getTracks","index2","kind","replaceTrack","socket","connectWithSocketServer","jwtToken","io","id","pendingInvitations","setFriends","setOnlineUsers","receiverId","userId","_id","updateDirectChatHistoryIfActive","roomHandler","webRTCHandler","emit","destroy","filter","signalPeerData","createNewRoom","newRoomCreated","updateActiveRooms","rooms","forEach","roomCreator","creatorUsername","f","setActiveRooms","joinRoom","roomId","leaveRoom","track","stop","Object","entries","mappedObject","CreateRoomButton","AvatarPreview","Avatar","large","substring","ActiveRoomButton","amountOfParticipants","activeRoomButtonDisabled","roomTitle","MainContainer","stlye","map","isDialogOpen","handleCloseDialog","Dialog","open","onClose","DialogTitle","DialogContent","DialogContentText","DialogActions","targetMailAddress","marginLeft","marginRight","marginBottom","AddFriendButton","setIsDialogOpen","FriendsTitle","OnlineIndicator","position","right","details","isOnline","name","align","checkOnlineUsers","isUserOnline","find","user","InvitationDecisionButtons","acceptInvitationHandler","rejectInvitationHandler","IconButton","buttonsDisabled","setButtonsDisabled","overflow","invitation","senderId","FriendsSideBar","WelcomeMessage","MessagesHeader","AvatarContainer","MessageContainer","MessageContent","SameAuthorMessageContent","SameAuthorMessageText","Message","sameAuthor","date","sameDay","Separator","DateLabel","left","top","DateSeparator","convertDateToHumanReadable","format","mm","getMonth","dd","getDate","yy","getFullYear","toString","slice","yyyy","replace","matched","message","author","Date","setMessage","handleSendMessage","receiverUserId","onKeyDown","key","MessengerContent","React","anchorEl","setAnchorEl","Boolean","currentTarget","Menu","MenuListProps","MenuItem","borderBottom","AppBar","DropdownMenu","bottom","ResizeRoomButton","isRoomMinimized","handleRoomResize","VideoEl","Video","isLocalStream","videoRef","useRef","current","srcObject","onloadedmetadata","play","ref","autoPlay","muted","flexWrap","CameraButton","cameraEnabled","setCameraEnabled","getVideoTracks","enabled","MicButton","micEnabled","setMicEnabled","getAudioTracks","CloseRoomButton","ScreenShareButton","handleScreenShareToggle","getDisplayMedia","t","borderTopLeftRadius","borderTopRightRadius","fullScreenRoomStyle","minimizedRoomStyle","Room","setIsRoomMinimized","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","Alert","severity","App","exact","path","to","hostname","match","ReactDOM","render","StrictMode","document","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.47258bf8.chunk.js","sourcesContent":["import React from \"react\";\r\nimport Box from \"@mui/material/Box\";\r\nimport { styled } from \"@mui/system\";\r\n\r\nconst BoxWrapper = styled(\"div\")({\r\n  width: \"100%\",\r\n  height: \"100vh\",\r\n  display: \"flex\",\r\n  alignItems: \"center\",\r\n  justifyContent: \"center\",\r\n  background: \"#67063c\",\r\n});\r\n\r\nconst AuthBox = (props) => {\r\n  return (\r\n    <BoxWrapper>\r\n      <Box\r\n        sx={{\r\n          width: 700,\r\n          height: 400,\r\n          bgcolor: \"#1B1B1B\",\r\n          borderRadius: \"5px\",\r\n          boxShadow: \"0 2px 10px 0 rgb(0 0 0 / 20%)\",\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          padding: \"25px\",\r\n        }}\r\n      >\r\n        {props.children}\r\n      </Box>\r\n    </BoxWrapper>\r\n  );\r\n};\r\n\r\nexport default AuthBox;\r\n","import React from \"react\";\r\nimport Button from \"@mui/material/Button\";\r\n\r\nconst CustomPrimaryButton = ({\r\n  // destructuring assignment on the props\r\n  label,\r\n  additionalStyles,\r\n  disabled,\r\n  onClick,\r\n}) => {\r\n  return (\r\n    <Button\r\n      variant=\"contained\"\r\n      sx={{\r\n        bgcolor: \"#67063c\",\r\n        color: \"#FFFFFF\",\r\n        textTransform: \"none\",\r\n        fontSize: \"16px\",\r\n        fontWeight: 500,\r\n        width: \"100%\",\r\n        height: \"40px\",\r\n      }}\r\n      style={additionalStyles ? additionalStyles : {}} // If additional styles are assigned, use that. If not nothing happens.\r\n      disabled={disabled}\r\n      onClick={onClick}\r\n    >\r\n      {label}\r\n    </Button>\r\n  );\r\n};\r\n\r\nexport default CustomPrimaryButton;\r\n","import React from \"react\";\r\nimport { Typography } from \"@mui/material\";\r\nimport { styled } from \"@mui/system\";\r\n\r\nconst RedirectText = styled(\"span\")({\r\n  color: \"#e910a7\",\r\n  fontWeight: 500,\r\n  cursor: \"pointer\",\r\n});\r\n\r\nconst RedirectInfo = ({\r\n  text,\r\n  redirectText,\r\n  additionalStyles,\r\n  redirectHandler,\r\n}) => {\r\n  return (\r\n    <Typography\r\n      sx={{ color: \"#72767d\" }}\r\n      style={additionalStyles ? additionalStyles : {}}\r\n      variant=\"subtitle2\"\r\n    >\r\n      {text}\r\n      <RedirectText onClick={redirectHandler}>{redirectText}</RedirectText>\r\n    </Typography>\r\n  );\r\n};\r\n\r\nexport default RedirectInfo;\r\n","import React from \"react\";\r\nimport CustomPrimaryButton from \"../../shared/components/CustomPrimaryButton\";\r\nimport RedirectInfo from \"../../shared/components/RedirectInfo\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Tooltip } from \"@mui/material\";\r\n\r\nconst getFormNotValidMessage = () => {\r\n  return \"Enter correct e-mail address and password should contains between 6 and 12 characters\";\r\n};\r\n\r\nconst getFormValidMessage = () => {\r\n  return \"Press to log in!\";\r\n};\r\n\r\nconst LoginPageFooter = ({ handleLogin, isFormValid }) => {\r\n  const history = useHistory();\r\n\r\n  const handlePushToRegisterPage = () => {\r\n    history.push(\"/register\");\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Tooltip\r\n        title={!isFormValid ? getFormNotValidMessage() : getFormValidMessage()}\r\n      >\r\n        <div>\r\n          <CustomPrimaryButton\r\n            label=\"Log in\"\r\n            additionalStyles={{ marginTop: \"30px\", backgroundColor: \"#67063c\" }}\r\n            disabled={!isFormValid}\r\n            onClick={handleLogin}\r\n          />\r\n        </div>\r\n      </Tooltip>\r\n      <RedirectInfo\r\n        text=\"Need an account? \"\r\n        redirectText=\"Create an account\"\r\n        additionalStyles={{ marginTop: \"5px\" }}\r\n        redirectHandler={handlePushToRegisterPage}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default LoginPageFooter;\r\n","import React from \"react\";\r\nimport { Typography } from \"@mui/material\";\r\n\r\nconst LoginPageHeader = () => {\r\n  return (\r\n    <>\r\n      <Typography variant=\"h5\" sx={{ color: \"#FFFFFF\" }}>\r\n        Welcome Back!\r\n      </Typography>\r\n      <Typography sx={{ color: \"#E1E1E1\" }}>\r\n        We are happy that you are with us!\r\n      </Typography>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default LoginPageHeader;\r\n","import React from \"react\";\r\nimport { styled } from \"@mui/system\";\r\n\r\nconst Wrapper = styled(\"div\")({\r\n  display: \"flex\",\r\n  justifyContent: \"center\",\r\n  flexDirection: \"column\",\r\n  width: \"100%\",\r\n});\r\n\r\nconst Label = styled(\"p\")({\r\n  color: \"#E1E1E1\",\r\n  textTransform: \"uppercase\",\r\n  fontWeight: \"600\",\r\n  fontSize: \"16px\",\r\n});\r\n\r\nconst Input = styled(\"input\")({\r\n  flexGrow: 1,\r\n  height: \"40px\",\r\n  border: \"1px solid black\",\r\n  borderRadius: \"5px\",\r\n  color: \"#E1E1E1\",\r\n  background: \"#141414\",\r\n  margin: 0,\r\n  fontSize: \"16px\",\r\n  padding: \"0 5px\",\r\n});\r\n\r\nconst InputWithLabel = (props) => {\r\n  const { value, setValue, label, type, placeholder } = props; // Receive props from the LoginPageInputs\r\n\r\n  const handleValueChange = (event) => {\r\n    setValue(event.target.value);\r\n  };\r\n\r\n  return (\r\n    <Wrapper>\r\n      <Label>{label}</Label>\r\n      <Input\r\n        value={value}\r\n        onChange={handleValueChange}\r\n        type={type}\r\n        placeholder={placeholder}\r\n      />\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default InputWithLabel;\r\n","import React from \"react\";\r\nimport InputWithLabel from \"../../shared/components/InputWithLabel\";\r\n\r\nconst LoginPageInputs = ({ mail, setMail, password, setPassword }) => {\r\n  // Receive the props\r\n  return (\r\n    <>\r\n      <InputWithLabel\r\n        // Receive props from the shared component AND the LoginPage\r\n        value={mail}\r\n        setValue={setMail}\r\n        label=\"E-mail\"\r\n        type=\"text\"\r\n        placeholder=\"Enter e-mail address\"\r\n      />\r\n      <InputWithLabel\r\n        value={password}\r\n        setValue={setPassword}\r\n        label=\"Password\"\r\n        type=\"password\"\r\n        placeholder=\"Enter password\"\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default LoginPageInputs;\r\n","export const validateLoginForm = ({ mail, password }) => {\r\n  const isMailValid = validateMail(mail);\r\n  const isPasswordValid = validatePassword(password);\r\n\r\n  return isMailValid && isPasswordValid;\r\n};\r\n\r\nexport const validateRegisterForm = ({ mail, password, username }) => {\r\n  return (\r\n    validateMail(mail) &&\r\n    validatePassword(password) &&\r\n    validateUsername(username)\r\n  );\r\n};\r\n\r\nexport const validateMail = (mail) => {\r\n  const emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$/;\r\n  return emailPattern.test(mail);\r\n};\r\n\r\nconst validatePassword = (password) => {\r\n  return password.length > 5 && password.length < 13;\r\n};\r\n\r\nconst validateUsername = (username) => {\r\n  return username.length > 2 && username.length < 13;\r\n};\r\n","export const logout = () => {\r\n  localStorage.clear();\r\n  window.location.pathname = \"/login\";\r\n};\r\n","import axios from \"axios\";\r\nimport { logout } from \"./shared/utils/auth\";\r\n\r\n// 6. The API exists in the \"apiClient\". This means all activities between the frontend and backend environment go through here. So, naturally, THROUGH the apiClient, the userDetails are passed to the server. **Please scroll the page down to see step 7.\r\nconst apiClient = axios.create({\r\n  baseURL: \"https://youngjun-video-chat-app.herokuapp.com/api\",\r\n  // timeout: 1000,\r\n});\r\n\r\napiClient.interceptors.request.use(\r\n  (config) => {\r\n    const userDetails = localStorage.getItem(\"user\");\r\n\r\n    if (userDetails) {\r\n      const token = JSON.parse(userDetails).token;\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n\r\n    return config;\r\n  },\r\n  (err) => {\r\n    return Promise.reject(err);\r\n  }\r\n);\r\n\r\n// public routes\r\n\r\n// 7. Here, the \"login\" function tries to POST our userDetails (data) to the \"/auth/login\" route. To check the route, we must go to our backend environment. **Please go to the \"authRoutes\" file in the backend folder to view the routing process.\r\nexport const login = async (data) => {\r\n  try {\r\n    return await apiClient.post(\"/auth/login\", data);\r\n  } catch (exception) {\r\n    return {\r\n      error: true,\r\n      exception,\r\n    };\r\n  }\r\n};\r\n\r\nexport const register = async (data) => {\r\n  try {\r\n    return await apiClient.post(\"/auth/register\", data);\r\n  } catch (exception) {\r\n    return {\r\n      error: true,\r\n      exception,\r\n    };\r\n  }\r\n};\r\n\r\n// secure routes\r\nexport const sendFriendInvitation = async (data) => {\r\n  try {\r\n    return await apiClient.post(\"/friend-invitation/invite\", data);\r\n  } catch (exception) {\r\n    checkResponseCode(exception);\r\n    return {\r\n      error: true,\r\n      exception,\r\n    };\r\n  }\r\n};\r\n\r\nexport const acceptFriendInvitation = async (data) => {\r\n  try {\r\n    return await apiClient.post(\"/friend-invitation/accept\", data);\r\n  } catch (exception) {\r\n    checkResponseCode(exception);\r\n    return {\r\n      error: true,\r\n      exception,\r\n    };\r\n  }\r\n};\r\n\r\nexport const rejectFriendInvitation = async (data) => {\r\n  try {\r\n    return await apiClient.post(\"/friend-invitation/reject\", data);\r\n  } catch (exception) {\r\n    checkResponseCode(exception);\r\n    return {\r\n      error: true,\r\n      exception,\r\n    };\r\n  }\r\n};\r\n\r\nconst checkResponseCode = (exception) => {\r\n  const responseCode = exception?.response?.status;\r\n\r\n  if (responseCode) {\r\n    (responseCode === 401 || responseCode === 403) && logout();\r\n  }\r\n};\r\n","const alertActions = {\r\n  OPEN_ALERT_MESSAGE: \"ALERT.OPEN_ALERT_MESSAGE\",\r\n  CLOSE_ALERT_MESSAGE: \"ALERT.CLOSE_ALERT_MESSAGE\",\r\n};\r\n\r\nexport const getActions = (dispatch) => {\r\n  return {\r\n    openAlertMessage: (content) => dispatch(openAlertMessage(content)),\r\n    closeAlertMessage: () => dispatch(closeAlertMessage()),\r\n  };\r\n};\r\n\r\nexport const openAlertMessage = (content) => {\r\n  return {\r\n    type: alertActions.OPEN_ALERT_MESSAGE,\r\n    content,\r\n  };\r\n};\r\n\r\nexport const closeAlertMessage = () => {\r\n  return {\r\n    type: alertActions.CLOSE_ALERT_MESSAGE,\r\n  };\r\n};\r\n\r\nexport default alertActions;\r\n","import * as api from \"../../api\";\r\nimport { openAlertMessage } from \"./alertActions\";\r\n\r\nexport const authActions = {\r\n  SET_USER_DETAILS: \"AUTH.SET_USER_DETAILS\",\r\n};\r\n\r\nexport const getActions = (dispatch) => {\r\n  return {\r\n    // And tadah! the login function is here.\r\n    // 4. The login function uses the userDetails (userDetails, history) to execute Redux's dispatch method. **Please scroll the page down to view step.5\r\n    login: (userDetails, history) => dispatch(login(userDetails, history)),\r\n    register: (userDetails, history) =>\r\n      dispatch(register(userDetails, history)),\r\n    setUserDetails: (userDetails) => dispatch(setUserDetails(userDetails)),\r\n  };\r\n};\r\n\r\nconst setUserDetails = (userDetails) => {\r\n  // 21. Here, the setUserDetails function will send the current STATE and the userDetails to the authReducer. **Please reference the \"authReducer.js\" file\r\n  return {\r\n    type: authActions.SET_USER_DETAILS,\r\n    userDetails,\r\n  };\r\n};\r\n\r\n// the login function\r\nconst login = (userDetails, history) => {\r\n  return async (dispatch) => {\r\n    // 5. To execute the dispatch method, the \"userDetails\" goes through the API, and the server then the database to be VALIDATED. Until then, the login function WAIT for the API to send a response BACK to be used to \"login\" function. So let's try to navigate to our API. **Please reference \"api.js\"\r\n    const response = await api.login(userDetails);\r\n    console.log(response);\r\n    // If there is an error show the Alert Messages\r\n    if (response.error) {\r\n      dispatch(openAlertMessage(response?.exception?.response?.data));\r\n    } else {\r\n      // 18. The updated user details from the backend server are assigned to userDetails.\r\n      const { userDetails } = response?.data;\r\n      //  19. then the userDetails get STORED at the localStorage of the browser. Why? Check my blog on my website about localStorage and its functionality ;)\r\n      localStorage.setItem(\"user\", JSON.stringify(userDetails));\r\n\r\n      // 20. Thanks to the redux-thunk, the dispatch method can be used at the \"setUserDetails\" function to send the ACTION OBJECT to the authReducer. **Please scroll the page above to access the \"setUserDetails\" function.\r\n      dispatch(setUserDetails(userDetails));\r\n      // 23. The user is redirected to the dashboard.\r\n      history.push(\"/dashboard\");\r\n    }\r\n  };\r\n};\r\n\r\nconst register = (userDetails, history) => {\r\n  return async (dispatch) => {\r\n    const response = await api.register(userDetails);\r\n    console.log(response);\r\n    if (response.error) {\r\n      dispatch(openAlertMessage(response?.exception?.response?.data));\r\n    } else {\r\n      const { userDetails } = response?.data;\r\n      localStorage.setItem(\"user\", JSON.stringify(userDetails));\r\n\r\n      dispatch(setUserDetails(userDetails));\r\n      history.push(\"/dashboard\");\r\n    }\r\n  };\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport AuthBox from \"../../shared/components/AuthBox\";\r\nimport LoginPageFooter from \"./LoginPageFooter\";\r\nimport LoginPageHeader from \"./LoginPageHeader\";\r\nimport LoginPageInputs from \"./LoginPageInputs\";\r\nimport { validateLoginForm } from \"../../shared/utils/validators\";\r\nimport { connect } from \"react-redux\";\r\nimport { getActions } from \"../../store/actions/authActions\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst LoginPage = ({ login }) => {\r\n  const history = useHistory();\r\n\r\n  const [mail, setMail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [isFormValid, setIsFormValid] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setIsFormValid(validateLoginForm({ mail, password }));\r\n  }, [mail, password, setIsFormValid]);\r\n\r\n  const handleLogin = () => {\r\n    // 2. The handleLogin function assigns userDetails to the \"login\" function. Where did the \"login\" function come from? It come from \"mapActionsToProps\" function. **Please scroll the page down to find the \"mapActionsToProps\" function\r\n    const userDetails = {\r\n      mail,\r\n      password,\r\n    };\r\n\r\n    login(userDetails, history);\r\n  };\r\n\r\n  return (\r\n    <AuthBox>\r\n      <LoginPageHeader />\r\n      <LoginPageInputs\r\n        // Send the props to the LoginPageInputs\r\n        mail={mail}\r\n        setMail={setMail}\r\n        password={password}\r\n        setPassword={setPassword}\r\n      />\r\n      <LoginPageFooter isFormValid={isFormValid} handleLogin={handleLogin} />\r\n      {/* 1. User clicks on the Login Button, and the \"handleLogin\" handler gets triggered. **Please scroll up the page to find the \"handleLogin\" function */}\r\n    </AuthBox>\r\n  );\r\n};\r\n\r\n// 3. The mapActionsToProps functions returns the \"getActions\" function from \"authActions\" file. Lets try to search \"authActions\" file to see if \"login\" function exists in the \"authActions\" file.\r\nconst mapActionsToProps = (dispatch) => {\r\n  return {\r\n    ...getActions(dispatch),\r\n  };\r\n};\r\n\r\nexport default connect(null, mapActionsToProps)(LoginPage);\r\n","import React from \"react\";\r\nimport InputWithLabel from \"../../shared/components/InputWithLabel\";\r\n\r\nconst RegisterPageInputs = (props) => {\r\n  const { mail, setMail, username, setUsername, password, setPassword } = props;\r\n\r\n  return (\r\n    <>\r\n      <InputWithLabel\r\n        value={mail}\r\n        setValue={setMail}\r\n        label=\"E-mail address\"\r\n        type=\"text\"\r\n        placeholder=\"Enter e-mail address\"\r\n      />\r\n      <InputWithLabel\r\n        value={username}\r\n        setValue={setUsername}\r\n        label=\"Username\"\r\n        type=\"text\"\r\n        placeholder=\"Enter a username\"\r\n      />\r\n      <InputWithLabel\r\n        value={password}\r\n        setValue={setPassword}\r\n        label=\"Password\"\r\n        type=\"password\"\r\n        placeholder=\"Enter password\"\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default RegisterPageInputs;\r\n","import React from \"react\";\r\nimport CustomPrimaryButton from \"../../shared/components/CustomPrimaryButton\";\r\nimport RedirectInfo from \"../../shared/components/RedirectInfo\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Tooltip } from \"@mui/material\";\r\n\r\nconst getFormNotValidMessage = () => {\r\n  return \"Username should contains between 3 and 12 characters and password should contains between 6 and 12 character. Also correct e-mail address should provided\";\r\n};\r\n\r\nconst getFormValidMessage = () => {\r\n  return \"Press to register!\";\r\n};\r\n\r\nconst RegisterPageFooter = ({ handleRegister, isFormValid }) => {\r\n  const history = useHistory();\r\n\r\n  const handlePushToLoginPage = () => {\r\n    history.push(\"/login\");\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Tooltip\r\n        title={!isFormValid ? getFormNotValidMessage() : getFormValidMessage()}\r\n      >\r\n        <div>\r\n          <CustomPrimaryButton\r\n            label=\"Register\"\r\n            additionalStyles={{ marginTop: \"30px\" }}\r\n            disabled={!isFormValid}\r\n            onClick={handleRegister}\r\n          />\r\n        </div>\r\n      </Tooltip>\r\n      <RedirectInfo\r\n        text=\"\"\r\n        redirectText=\"Already have an account ?\"\r\n        additionalStyles={{ marginTop: \"5px\" }}\r\n        redirectHandler={handlePushToLoginPage}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default RegisterPageFooter;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Typography } from \"@mui/material\";\r\nimport AuthBox from \"../../shared/components/AuthBox\";\r\nimport RegisterPageInputs from \"./RegisterPageInputs\";\r\nimport RegisterPageFooter from \"./RegisterPageFooter\";\r\nimport { validateRegisterForm } from \"../../shared/utils/validators\";\r\nimport { connect } from \"react-redux\";\r\nimport { getActions } from \"../../store/actions/authActions\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst RegisterPage = ({ register }) => {\r\n  const history = useHistory();\r\n\r\n  const [mail, setMail] = useState(\"\");\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  const [isFormValid, setIsFormValid] = useState(false);\r\n\r\n  const handleRegister = () => {\r\n    const userDetails = {\r\n      mail,\r\n      password,\r\n      username,\r\n    };\r\n\r\n    register(userDetails, history);\r\n  };\r\n\r\n  useEffect(() => {\r\n    setIsFormValid(\r\n      validateRegisterForm({\r\n        mail,\r\n        username,\r\n        password,\r\n      })\r\n    );\r\n  }, [mail, username, password, setIsFormValid]);\r\n\r\n  return (\r\n    <AuthBox>\r\n      <Typography variant=\"h5\" sx={{ color: \"white \" }}>\r\n        Create an account\r\n      </Typography>\r\n      <RegisterPageInputs\r\n        mail={mail}\r\n        setMail={setMail}\r\n        username={username}\r\n        setUsername={setUsername}\r\n        password={password}\r\n        setPassword={setPassword}\r\n      />\r\n      <RegisterPageFooter\r\n        handleRegister={handleRegister}\r\n        isFormValid={isFormValid}\r\n      />\r\n    </AuthBox>\r\n  );\r\n};\r\n\r\nconst mapActionsToProps = (dispatch) => {\r\n  return {\r\n    ...getActions(dispatch),\r\n  };\r\n};\r\n\r\nexport default connect(null, mapActionsToProps)(RegisterPage);\r\n","export default __webpack_public_path__ + \"static/media/JOO_white.fdb1b01c.png\";","import React from \"react\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Logo from \"../../assets/JOO_white.png\";\r\n\r\nconst MainPageButton = () => {\r\n  return (\r\n    <Button\r\n      style={{\r\n        width: \"48px\",\r\n        height: \"48px\",\r\n        borderRadius: \"16px\",\r\n        margin: 0,\r\n        padding: 0,\r\n        minWidth: 0,\r\n        marginTop: \"10px\",\r\n        color: \"white\",\r\n        backgroundColor: \"#67063c\",\r\n      }}\r\n    >\r\n      <img src={Logo} style={{ width: \"35px\" }}></img>\r\n    </Button>\r\n  );\r\n};\r\n\r\nexport default MainPageButton;\r\n","import { authActions } from \"../actions/authActions\";\r\n\r\nconst initState = {\r\n  userDetails: null,\r\n};\r\n\r\nconst reducer = (state = initState, action) => {\r\n  switch (action.type) {\r\n    // 22. If the state authAction sent matches with the case written below. the UPDATED state will be returned to the login Function. **Please reference back to the \"authActions.js\"\r\n    case authActions.SET_USER_DETAILS:\r\n      return {\r\n        ...state,\r\n        userDetails: action.userDetails,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","import alertActions from \"../actions/alertActions\";\r\n\r\nconst initState = {\r\n  showAlertMessage: false,\r\n  alertMessageContent: null,\r\n};\r\n\r\nconst reducer = (state = initState, action) => {\r\n  switch (action.type) {\r\n    case alertActions.OPEN_ALERT_MESSAGE:\r\n      return {\r\n        ...state,\r\n        showAlertMessage: true,\r\n        alertMessageContent: action.content,\r\n      };\r\n    case alertActions.CLOSE_ALERT_MESSAGE:\r\n      return {\r\n        ...state,\r\n        showAlertMessage: false,\r\n        alertMessageContent: null,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","import { openAlertMessage } from \"./alertActions\";\r\nimport * as api from \"../../api\";\r\n\r\nexport const friendsActions = {\r\n  SET_FRIENDS: \"FRIENDS.SET_FRIENDS\",\r\n  SET_PENDING_FRIENDS_INVITATIONS: \"FRIENDS.SET_PENDING_FRIENDS_INVITATIONS\",\r\n  SET_ONLINE_USERS: \"FRIENDS.SET_ONLINE_USERS\",\r\n};\r\n\r\nexport const getActions = (dispatch) => {\r\n  return {\r\n    sendFriendInvitation: (data, closeDialogHandler) =>\r\n      dispatch(sendFriendInvitation(data, closeDialogHandler)),\r\n    acceptFriendInvitation: (data) => dispatch(acceptFriendInvitation(data)),\r\n    rejectFriendInvitation: (data) => dispatch(rejectFriendInvitation(data)),\r\n  };\r\n};\r\n\r\nexport const setPendingFriendsInvitations = (pendingFriendsInvitations) => {\r\n  return {\r\n    type: friendsActions.SET_PENDING_FRIENDS_INVITATIONS,\r\n    pendingFriendsInvitations,\r\n  };\r\n};\r\n\r\nexport const setFriends = (friends) => {\r\n  return {\r\n    type: friendsActions.SET_FRIENDS,\r\n    friends,\r\n  };\r\n};\r\n\r\nexport const setOnlineUsers = (onlineUsers) => {\r\n  return {\r\n    type: friendsActions.SET_ONLINE_USERS,\r\n    onlineUsers,\r\n  };\r\n};\r\n\r\nconst sendFriendInvitation = (data, closeDialogHandler) => {\r\n  return async (dispatch) => {\r\n    const response = await api.sendFriendInvitation(data);\r\n\r\n    if (response.error) {\r\n      dispatch(openAlertMessage(response.exception?.response?.data));\r\n    } else {\r\n      dispatch(openAlertMessage(\"Invitation has been sent!\"));\r\n      closeDialogHandler();\r\n    }\r\n  };\r\n};\r\n\r\nconst acceptFriendInvitation = (data) => {\r\n  return async (dispatch) => {\r\n    const response = await api.acceptFriendInvitation(data);\r\n\r\n    if (response.error) {\r\n      dispatch(openAlertMessage(response.exception?.response?.data));\r\n    } else {\r\n      dispatch(openAlertMessage(\"Invitation accepted!\"));\r\n    }\r\n  };\r\n};\r\n\r\nconst rejectFriendInvitation = (data) => {\r\n  return async (dispatch) => {\r\n    const response = await api.rejectFriendInvitation(data);\r\n\r\n    if (response.error) {\r\n      dispatch(openAlertMessage(response.exception?.response?.data));\r\n    } else {\r\n      dispatch(openAlertMessage(\"Invitation rejected!\"));\r\n    }\r\n  };\r\n};\r\n","import { friendsActions } from \"../actions/friendsActions\";\r\n\r\nconst initState = {\r\n  friends: [],\r\n  pendingFriendsInvitations: [],\r\n  onlineUsers: [],\r\n};\r\n\r\nconst reducer = (state = initState, action) => {\r\n  switch (action.type) {\r\n    case friendsActions.SET_PENDING_FRIENDS_INVITATIONS:\r\n      return {\r\n        ...state,\r\n        pendingFriendsInvitations: action.pendingFriendsInvitations,\r\n      };\r\n    case friendsActions.SET_FRIENDS:\r\n      return {\r\n        ...state,\r\n        friends: action.friends,\r\n      };\r\n    case friendsActions.SET_ONLINE_USERS:\r\n      return {\r\n        ...state,\r\n        onlineUsers: action.onlineUsers,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","export const chatTypes = {\r\n  DIRECT: \"DIRECT\",\r\n  GROUP: \"GROUP\",\r\n};\r\n\r\nexport const chatActions = {\r\n  SET_CHOSEN_CHAT_DETAILS: \"CHAT.SET_CHOSEN_CHAT_DETAILS\",\r\n  SET_MESSAGES: \"CHAT.SET_MESSAGES\",\r\n  SET_CHAT_TYPE: \"CHAT.SET_CHAT_TYPE\",\r\n};\r\n\r\nexport const getActions = (dispatch) => {\r\n  return {\r\n    setChosenChatDetails: (details, chatType) =>\r\n      dispatch(setChosenChatDetails(details, chatType)),\r\n  };\r\n};\r\n\r\nexport const setChosenChatDetails = (chatDetails, type) => {\r\n  return {\r\n    type: chatActions.SET_CHOSEN_CHAT_DETAILS,\r\n    chatType: type,\r\n    chatDetails,\r\n  };\r\n};\r\n\r\nexport const setMessages = (messages) => {\r\n  return {\r\n    type: chatActions.SET_MESSAGES,\r\n    messages,\r\n  };\r\n};\r\n","import { chatActions } from \"../actions/chatActions\";\r\n\r\nconst initState = {\r\n  chosenChatDetails: null,\r\n  chatType: null,\r\n  messages: [],\r\n};\r\n\r\nconst reducer = (state = initState, action) => {\r\n  switch (action.type) {\r\n    case chatActions.SET_CHOSEN_CHAT_DETAILS:\r\n      return {\r\n        ...state,\r\n        chosenChatDetails: action.chatDetails,\r\n        chatType: action.chatType,\r\n        messages: [],\r\n      };\r\n    case chatActions.SET_MESSAGES:\r\n      return {\r\n        ...state,\r\n        messages: action.messages,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","export const roomActions = {\r\n  OPEN_ROOM: \"ROOM.OPEN_ROOM\",\r\n  SET_ROOM_DETAILS: \"ROOM.SET_ROOM_DETAILS\",\r\n  SET_ACTIVE_ROOMS: \"ROOM.SET_ACTIVE_ROOMS\",\r\n  SET_LOCAL_STREAM: \"ROOM.SET_LOCAL_STREAM\",\r\n  SET_REMOTE_STREAMS: \"ROOM.SET_REMOTE_STREAMS\",\r\n  SET_AUDIO_ONLY: \"ROOM.SET_AUDIO_ONLY\",\r\n  SET_SCREEN_SHARE_STREAM: \"ROOM.SET_SCREEN_SHARE_STREAM\",\r\n  SET_IS_USER_JOINED_WITH_ONLY_AUDIO: \"ROOM.SET_IS_USER_JOINED_WITH_ONLY_AUDIO\",\r\n};\r\n\r\nexport const setOpenRoom = (\r\n  isUserRoomCreator = false,\r\n  isUserInRoom = false\r\n) => {\r\n  return {\r\n    type: roomActions.OPEN_ROOM,\r\n    isUserRoomCreator,\r\n    isUserInRoom,\r\n  };\r\n};\r\n\r\nexport const getActions = (dispatch) => {\r\n  return {\r\n    setAudioOnly: (audioOnly) => dispatch(setAudioOnly(audioOnly)),\r\n    setScreenSharingStream: (stream) => {\r\n      dispatch(setScreenSharingStream(stream));\r\n    },\r\n  };\r\n};\r\n\r\nexport const setRoomDetails = (roomDetails) => {\r\n  return {\r\n    type: roomActions.SET_ROOM_DETAILS,\r\n    roomDetails,\r\n  };\r\n};\r\n\r\nexport const setActiveRooms = (activeRooms) => {\r\n  return {\r\n    type: roomActions.SET_ACTIVE_ROOMS,\r\n    activeRooms,\r\n  };\r\n};\r\n\r\nexport const setLocalStream = (localStream) => {\r\n  return {\r\n    type: roomActions.SET_LOCAL_STREAM,\r\n    localStream,\r\n  };\r\n};\r\n\r\nexport const setAudioOnly = (audioOnly) => {\r\n  return {\r\n    type: roomActions.SET_AUDIO_ONLY,\r\n    audioOnly,\r\n  };\r\n};\r\n\r\nexport const setRemoteStreams = (remoteStreams) => {\r\n  return {\r\n    type: roomActions.SET_REMOTE_STREAMS,\r\n    remoteStreams,\r\n  };\r\n};\r\n\r\nexport const setScreenSharingStream = (stream) => {\r\n  return {\r\n    type: roomActions.SET_SCREEN_SHARE_STREAM,\r\n    isScreenSharingActive: stream ? true : false,\r\n    screenSharingStream: stream || null,\r\n  };\r\n};\r\n\r\nexport const setIsUserJoinedOnlyWithAudio = (onlyWithAudio) => {\r\n  return {\r\n    type: roomActions.SET_IS_USER_JOINED_WITH_ONLY_AUDIO,\r\n    isUserJoinedWithOnlyAudio: onlyWithAudio,\r\n  };\r\n};\r\n","import { roomActions } from \"../actions/roomActions\";\r\n\r\nconst initState = {\r\n  isUserInRoom: false,\r\n  isUserRoomCreator: false,\r\n  roomDetails: null,\r\n  activeRooms: [],\r\n  localStream: null,\r\n  remoteStreams: [],\r\n  audioOnly: false,\r\n  screenSharingStream: null,\r\n  isScreenSharingActive: false,\r\n  isUserJoinedWithOnlyAudio: false,\r\n};\r\n\r\nconst reducer = (state = initState, action) => {\r\n  switch (action.type) {\r\n    case roomActions.OPEN_ROOM:\r\n      return {\r\n        ...state,\r\n        isUserInRoom: action.isUserInRoom,\r\n        isUserRoomCreator: action.isUserRoomCreator,\r\n      };\r\n    case roomActions.SET_ROOM_DETAILS:\r\n      return {\r\n        ...state,\r\n        roomDetails: action.roomDetails,\r\n      };\r\n    case roomActions.SET_ACTIVE_ROOMS:\r\n      return {\r\n        ...state,\r\n        activeRooms: action.activeRooms,\r\n      };\r\n    case roomActions.SET_LOCAL_STREAM:\r\n      return {\r\n        ...state,\r\n        localStream: action.localStream,\r\n      };\r\n    case roomActions.SET_AUDIO_ONLY:\r\n      return {\r\n        ...state,\r\n        audioOnly: action.audioOnly,\r\n      };\r\n    case roomActions.SET_REMOTE_STREAMS:\r\n      return {\r\n        ...state,\r\n        remoteStreams: action.remoteStreams,\r\n      };\r\n    case roomActions.SET_SCREEN_SHARE_STREAM:\r\n      return {\r\n        ...state,\r\n        screenSharingStream: action.screenSharingStream,\r\n        isScreenSharingActive: action.isScreenSharingActive,\r\n      };\r\n    case roomActions.SET_IS_USER_JOINED_WITH_ONLY_AUDIO:\r\n      return {\r\n        ...state,\r\n        isUserJoinedWithOnlyAudio: action.isUserJoinedWithOnlyAudio,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","import { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport { combineReducers, createStore, applyMiddleware } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\n\r\nimport authReducer from \"./reducers/authReducer\";\r\nimport alertReducer from \"./reducers/alertReducer\";\r\nimport friendsReducer from \"./reducers/friendsReducer\";\r\nimport chatReducer from \"./reducers/chatReducer\";\r\nimport roomReducer from \"./reducers/roomReducer\";\r\n\r\nconst rootReducer = combineReducers({\r\n  auth: authReducer,\r\n  alert: alertReducer,\r\n  friends: friendsReducer,\r\n  chat: chatReducer,\r\n  room: roomReducer,\r\n});\r\n\r\nconst store = createStore(\r\n  rootReducer,\r\n  composeWithDevTools(applyMiddleware(thunk))\r\n);\r\n\r\nexport default store;\r\n","import store from \"../../store/store\";\r\nimport { setMessages } from \"../../store/actions/chatActions\";\r\n\r\nexport const updateDirectChatHistoryIfActive = (data) => {\r\n  const { participants, messages } = data;\r\n\r\n  // find id of user from token and id from active conversation\r\n  const receiverId = store.getState().chat.chosenChatDetails?.id;\r\n  const userId = store.getState().auth.userDetails._id;\r\n\r\n  if (receiverId && userId) {\r\n    const usersInCoversation = [receiverId, userId];\r\n\r\n    updateChatHistoryIfSameConversationActive({\r\n      participants,\r\n      usersInCoversation,\r\n      messages,\r\n    });\r\n  }\r\n};\r\n\r\nconst updateChatHistoryIfSameConversationActive = ({\r\n  participants,\r\n  usersInCoversation,\r\n  messages,\r\n}) => {\r\n  const result = participants.every(function (participantId) {\r\n    return usersInCoversation.includes(participantId);\r\n  });\r\n\r\n  if (result) {\r\n    store.dispatch(setMessages(messages));\r\n  }\r\n};\r\n","import store from \"../store/store\";\r\nimport { setLocalStream, setRemoteStreams } from \"../store/actions/roomActions\";\r\nimport Peer from \"simple-peer\";\r\nimport * as socketConnection from \"./socketConnection\";\r\n\r\nconst getConfiguration = () => {\r\n  const turnIceServers = null;\r\n\r\n  if (turnIceServers) {\r\n    // TODO use TURN server credentials\r\n  } else {\r\n    console.warn(\"Using only STUN server\");\r\n    return {\r\n      iceServers: [\r\n        {\r\n          urls: \"stun:stun.l.google.com:19302\",\r\n        },\r\n      ],\r\n    };\r\n  }\r\n};\r\n\r\nconst onlyAudioConstraints = {\r\n  audio: true,\r\n  video: false,\r\n};\r\n\r\nconst defaultConstraints = {\r\n  video: true,\r\n  audio: true,\r\n};\r\n\r\nexport const getLocalStreamPreview = (onlyAudio = false, callbackFunc) => {\r\n  const constraints = onlyAudio ? onlyAudioConstraints : defaultConstraints;\r\n\r\n  navigator.mediaDevices\r\n    .getUserMedia(constraints)\r\n    .then((stream) => {\r\n      store.dispatch(setLocalStream(stream));\r\n      callbackFunc();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n      console.log(\"Cannot get an access to local stream\");\r\n    });\r\n};\r\n\r\nlet peers = {};\r\n\r\nexport const prepareNewPeerConnection = (connUserSocketId, isInitiator) => {\r\n  const localStream = store.getState().room.localStream;\r\n\r\n  if (isInitiator) {\r\n    console.log(\"preparing new peer connection as initiator\");\r\n  } else {\r\n    console.log(\"preparing new peer connection as not initiator\");\r\n  }\r\n\r\n  peers[connUserSocketId] = new Peer({\r\n    initiator: isInitiator,\r\n    config: getConfiguration(),\r\n    stream: localStream,\r\n  });\r\n\r\n  peers[connUserSocketId].on(\"signal\", (data) => {\r\n    const signalData = {\r\n      signal: data,\r\n      connUserSocketId: connUserSocketId,\r\n    };\r\n\r\n    socketConnection.signalPeerData(signalData);\r\n  });\r\n\r\n  peers[connUserSocketId].on(\"stream\", (remoteStream) => {\r\n    // TODO\r\n    // add new remote stream to our server store\r\n    console.log(\"remote stream came from other user\");\r\n    console.log(\"direct connection has been established\");\r\n    remoteStream.connUserSocketId = connUserSocketId;\r\n    addNewRemoteStream(remoteStream);\r\n  });\r\n};\r\n\r\nexport const handleSignalingData = (data) => {\r\n  const { connUserSocketId, signal } = data;\r\n\r\n  if (peers[connUserSocketId]) {\r\n    peers[connUserSocketId].signal(signal);\r\n  }\r\n};\r\n\r\nconst addNewRemoteStream = (remoteStream) => {\r\n  const remoteStreams = store.getState().room.remoteStreams;\r\n  const newRemoteStreams = [...remoteStreams, remoteStream];\r\n\r\n  store.dispatch(setRemoteStreams(newRemoteStreams));\r\n};\r\n\r\nexport const closeAllConnections = () => {\r\n  Object.entries(peers).forEach((mappedObject) => {\r\n    const connUserSocketId = mappedObject[0];\r\n    if (peers[connUserSocketId]) {\r\n      peers[connUserSocketId].destroy();\r\n      delete peers[connUserSocketId];\r\n    }\r\n  });\r\n};\r\n\r\nexport const handleParticipantLeftRoom = (data) => {\r\n  const { connUserSocketId } = data;\r\n\r\n  if (peers[connUserSocketId]) {\r\n    peers[connUserSocketId].destroy();\r\n    delete peers[connUserSocketId];\r\n  }\r\n\r\n  const remoteStreams = store.getState().room.remoteStreams;\r\n\r\n  const newRemoteStreams = remoteStreams.filter(\r\n    (remoteStream) => remoteStream.connUserSocketId !== connUserSocketId\r\n  );\r\n\r\n  store.dispatch(setRemoteStreams(newRemoteStreams));\r\n};\r\n\r\nexport const switchOutgoingTracks = (stream) => {\r\n  for (let socket_id in peers) {\r\n    for (let index in peers[socket_id].streams[0].getTracks()) {\r\n      for (let index2 in stream.getTracks()) {\r\n        if (\r\n          peers[socket_id].streams[0].getTracks()[index].kind ===\r\n          stream.getTracks()[index2].kind\r\n        ) {\r\n          peers[socket_id].replaceTrack(\r\n            peers[socket_id].streams[0].getTracks()[index],\r\n            stream.getTracks()[index2],\r\n            peers[socket_id].streams[0]\r\n          );\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n","import io from \"socket.io-client\";\r\nimport {\r\n  setPendingFriendsInvitations,\r\n  setFriends,\r\n  setOnlineUsers,\r\n} from \"../store/actions/friendsActions\";\r\nimport store from \"../store/store\";\r\nimport { updateDirectChatHistoryIfActive } from \"../shared/utils/chat\";\r\nimport * as roomHandler from \"./roomHandler\";\r\nimport * as webRTCHandler from \"./webRTCHandler\";\r\n\r\nlet socket = null;\r\n\r\nexport const connectWithSocketServer = (userDetails) => {\r\n  const jwtToken = userDetails.token;\r\n\r\n  socket = io(\"https://youngjun-video-chat-app.herokuapp.com/\", {\r\n    auth: {\r\n      token: jwtToken,\r\n    },\r\n  });\r\n\r\n  socket.on(\"connect\", () => {\r\n    console.log(\"succesfully connected with socket.io server\");\r\n    console.log(socket.id);\r\n  });\r\n\r\n  socket.on(\"friends-invitations\", (data) => {\r\n    const { pendingInvitations } = data;\r\n    store.dispatch(setPendingFriendsInvitations(pendingInvitations));\r\n  });\r\n\r\n  socket.on(\"friends-list\", (data) => {\r\n    const { friends } = data;\r\n    store.dispatch(setFriends(friends));\r\n  });\r\n\r\n  socket.on(\"online-users\", (data) => {\r\n    const { onlineUsers } = data;\r\n    store.dispatch(setOnlineUsers(onlineUsers));\r\n  });\r\n\r\n  socket.on(\"direct-chat-history\", (data) => {\r\n    console.log(data);\r\n    updateDirectChatHistoryIfActive(data);\r\n  });\r\n\r\n  socket.on(\"room-create\", (data) => {\r\n    roomHandler.newRoomCreated(data);\r\n  });\r\n\r\n  socket.on(\"active-rooms\", (data) => {\r\n    roomHandler.updateActiveRooms(data);\r\n  });\r\n\r\n  socket.on(\"conn-prepare\", (data) => {\r\n    const { connUserSocketId } = data;\r\n    webRTCHandler.prepareNewPeerConnection(connUserSocketId, false);\r\n    socket.emit(\"conn-init\", { connUserSocketId: connUserSocketId });\r\n  });\r\n\r\n  socket.on(\"conn-init\", (data) => {\r\n    const { connUserSocketId } = data;\r\n    webRTCHandler.prepareNewPeerConnection(connUserSocketId, true);\r\n  });\r\n\r\n  socket.on(\"conn-signal\", (data) => {\r\n    webRTCHandler.handleSignalingData(data);\r\n  });\r\n\r\n  socket.on(\"room-participant-left\", (data) => {\r\n    console.log(\"user left room\");\r\n    webRTCHandler.handleParticipantLeftRoom(data);\r\n  });\r\n};\r\n\r\nexport const sendDirectMessage = (data) => {\r\n  console.log(data);\r\n  socket.emit(\"direct-message\", data);\r\n};\r\n\r\nexport const getDirectChatHistory = (data) => {\r\n  socket.emit(\"direct-chat-history\", data);\r\n};\r\n\r\nexport const createNewRoom = () => {\r\n  socket.emit(\"room-create\");\r\n};\r\n\r\nexport const joinRoom = (data) => {\r\n  socket.emit(\"room-join\", data);\r\n};\r\n\r\nexport const leaveRoom = (data) => {\r\n  socket.emit(\"room-leave\", data);\r\n};\r\n\r\nexport const signalPeerData = (data) => {\r\n  socket.emit(\"conn-signal\", data);\r\n};\r\n","import store from \"../store/store\";\r\nimport {\r\n  setOpenRoom,\r\n  setRoomDetails,\r\n  setActiveRooms,\r\n  setLocalStream,\r\n  setRemoteStreams,\r\n  setScreenSharingStream,\r\n  setIsUserJoinedOnlyWithAudio,\r\n} from \"../store/actions/roomActions\";\r\nimport * as socketConnection from \"./socketConnection\";\r\nimport * as webRTCHandler from \"./webRTCHandler\";\r\n\r\nexport const createNewRoom = () => {\r\n  const successCalbackFunc = () => {\r\n    store.dispatch(setOpenRoom(true, true));\r\n\r\n    const audioOnly = store.getState().room.audioOnly;\r\n    store.dispatch(setIsUserJoinedOnlyWithAudio(audioOnly));\r\n    socketConnection.createNewRoom();\r\n  };\r\n\r\n  const audioOnly = store.getState().room.audioOnly;\r\n  webRTCHandler.getLocalStreamPreview(audioOnly, successCalbackFunc);\r\n};\r\n\r\nexport const newRoomCreated = (data) => {\r\n  const { roomDetails } = data;\r\n  store.dispatch(setRoomDetails(roomDetails));\r\n};\r\n\r\nexport const updateActiveRooms = (data) => {\r\n  const { activeRooms } = data;\r\n\r\n  const friends = store.getState().friends.friends;\r\n  const rooms = [];\r\n\r\n  const userId = store.getState().auth.userDetails?._id;\r\n\r\n  activeRooms.forEach((room) => {\r\n    const isRoomCreatedByMe = room.roomCreator.userId === userId;\r\n\r\n    if (isRoomCreatedByMe) {\r\n      rooms.push({ ...room, creatorUsername: \"Me\" });\r\n    } else {\r\n      friends.forEach((f) => {\r\n        if (f.id === room.roomCreator.userId) {\r\n          rooms.push({ ...room, creatorUsername: f.username });\r\n        }\r\n      });\r\n    }\r\n  });\r\n\r\n  store.dispatch(setActiveRooms(rooms));\r\n};\r\n\r\nexport const joinRoom = (roomId) => {\r\n  const successCalbackFunc = () => {\r\n    store.dispatch(setRoomDetails({ roomId }));\r\n    store.dispatch(setOpenRoom(false, true));\r\n    const audioOnly = store.getState().room.audioOnly;\r\n    store.dispatch(setIsUserJoinedOnlyWithAudio(audioOnly));\r\n    socketConnection.joinRoom({ roomId });\r\n  };\r\n\r\n  const audioOnly = store.getState().room.audioOnly;\r\n  webRTCHandler.getLocalStreamPreview(audioOnly, successCalbackFunc);\r\n};\r\n\r\nexport const leaveRoom = () => {\r\n  const roomId = store.getState().room.roomDetails.roomId;\r\n\r\n  const localStream = store.getState().room.localStream;\r\n  if (localStream) {\r\n    localStream.getTracks().forEach((track) => track.stop());\r\n    store.dispatch(setLocalStream(null));\r\n  }\r\n\r\n  const screenSharingStream = store.getState().room.screenSharingStream;\r\n  if (screenSharingStream) {\r\n    screenSharingStream.getTracks().forEach((track) => track.stop());\r\n    store.dispatch(setScreenSharingStream(null));\r\n  }\r\n\r\n  store.dispatch(setRemoteStreams([]));\r\n  webRTCHandler.closeAllConnections();\r\n\r\n  socketConnection.leaveRoom({ roomId });\r\n  store.dispatch(setRoomDetails(null));\r\n  store.dispatch(setOpenRoom(false, false));\r\n};\r\n","import React from \"react\";\r\nimport Button from \"@mui/material/Button\";\r\nimport AddIcon from \"@mui/icons-material/Add\";\r\nimport * as roomHandler from \"../../realtimeCommunication/roomHandler\";\r\n\r\nconst CreateRoomButton = ({ isUserInRoom }) => {\r\n  const createNewRoomHandler = () => {\r\n    roomHandler.createNewRoom();\r\n  };\r\n\r\n  return (\r\n    <Button\r\n      disabled={isUserInRoom}\r\n      onClick={createNewRoomHandler}\r\n      style={{\r\n        width: \"48px\",\r\n        height: \"48px\",\r\n        borderRadius: \"16px\",\r\n        margin: 0,\r\n        padding: 0,\r\n        minWidth: 0,\r\n        marginTop: \"10px\",\r\n        color: \"white\",\r\n        backgroundColor: \"#67063c\",\r\n      }}\r\n    >\r\n      <AddIcon />\r\n    </Button>\r\n  );\r\n};\r\n\r\nexport default CreateRoomButton;\r\n","import React from \"react\";\r\nimport { styled } from \"@mui/system\";\r\n\r\nconst AvatarPreview = styled(\"div\")({\r\n  height: \"42px\",\r\n  width: \"42px\",\r\n  backgroundColor: \"#67063c\",\r\n  borderRadius: \"42px\",\r\n  display: \"flex\",\r\n  alignItems: \"center\",\r\n  justifyContent: \"center\",\r\n  fontSize: \"20px\",\r\n  fontWeight: \"700\",\r\n  color: \"white\",\r\n});\r\n\r\nconst Avatar = ({ username, large }) => {\r\n  return (\r\n    <AvatarPreview style={large ? { height: \"80px\", width: \"80px\" } : {}}>\r\n      {username.substring(0, 2)}\r\n    </AvatarPreview>\r\n  );\r\n};\r\n\r\nexport default Avatar;\r\n","import React from \"react\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Tooltip from \"@mui/material/Tooltip\";\r\nimport Avatar from \"../../shared/components/Avatar\";\r\nimport * as roomHandler from \"../../realtimeCommunication/roomHandler\";\r\n\r\nconst ActiveRoomButton = ({\r\n  creatorUsername,\r\n  roomId,\r\n  amountOfParticipants,\r\n  isUserInRoom,\r\n}) => {\r\n  const handleJoinActiveRoom = () => {\r\n    if (amountOfParticipants < 4) {\r\n      roomHandler.joinRoom(roomId);\r\n    }\r\n  };\r\n\r\n  const activeRoomButtonDisabled = amountOfParticipants > 3;\r\n  const roomTitle = `Cretor: ${creatorUsername}. Connected: ${amountOfParticipants}`;\r\n\r\n  return (\r\n    <Tooltip title={roomTitle}>\r\n      <div>\r\n        <Button\r\n          style={{\r\n            width: \"48px\",\r\n            height: \"48px\",\r\n            borderRadius: \"16px\",\r\n            margin: 0,\r\n            padding: 0,\r\n            minWidth: 0,\r\n            marginTop: \"10px\",\r\n            color: \"white\",\r\n            backgroundColor: \"#67063c\",\r\n          }}\r\n          disabled={activeRoomButtonDisabled || isUserInRoom}\r\n          onClick={handleJoinActiveRoom}\r\n        >\r\n          <Avatar username={creatorUsername} />\r\n        </Button>\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n};\r\n\r\nexport default ActiveRoomButton;\r\n","import React from \"react\";\r\nimport { styled } from \"@mui/system\";\r\nimport MainPageButton from \"./MainPageButton\";\r\nimport CreateRoomButton from \"./CreateRoomButton\";\r\nimport { connect } from \"react-redux\";\r\nimport ActiveRoomButton from \"./ActiveRoomButton\";\r\n\r\nconst MainContainer = styled(\"div\")({\r\n  width: \"72px\",\r\n  height: \"100%\",\r\n  display: \"flex\",\r\n  flexDirection: \"column\",\r\n  alignItems: \"center\",\r\n  backgroundColor: \"#000000\",\r\n});\r\n\r\nconst SideBar = ({ activeRooms, isUserInRoom }) => {\r\n  return (\r\n    <MainContainer>\r\n      <MainPageButton />\r\n      <CreateRoomButton\r\n        stlye={{ backgroundColor: \"#67063c\" }}\r\n        isUserInRoom={isUserInRoom}\r\n      />\r\n      {activeRooms.map((room) => (\r\n        <ActiveRoomButton\r\n          roomId={room.roomId}\r\n          creatorUsername={room.creatorUsername}\r\n          amountOfParticipants={room.participants.length}\r\n          key={room.roomId}\r\n          isUserInRoom={isUserInRoom}\r\n          style={{ backgroundColor: \"#5865f2\" }}\r\n        />\r\n      ))}\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nconst mapStoreStateToProps = ({ room }) => {\r\n  return {\r\n    ...room,\r\n  };\r\n};\r\n\r\nexport default connect(mapStoreStateToProps)(SideBar);\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Dialog from \"@mui/material/Dialog\";\r\nimport DialogTitle from \"@mui/material/DialogTitle\";\r\nimport DialogActions from \"@mui/material/DialogActions\";\r\nimport DialogContent from \"@mui/material/DialogContent\";\r\nimport DialogContentText from \"@mui/material/DialogContentText\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport { validateMail } from \"../../shared/utils/validators\";\r\nimport InputWithLabel from \"../../shared/components/InputWithLabel\";\r\nimport CustomPrimaryButton from \"../../shared/components/CustomPrimaryButton\";\r\nimport { connect } from \"react-redux\";\r\nimport { getActions } from \"../../store/actions/friendsActions\";\r\n\r\nconst AddFriendDialog = ({\r\n  isDialogOpen,\r\n  closeDialogHandler,\r\n  sendFriendInvitation = () => {},\r\n}) => {\r\n  const [mail, setMail] = useState(\"\");\r\n  const [isFormValid, setIsFormValid] = useState(\"\");\r\n\r\n  const handleSendInvitation = () => {\r\n    sendFriendInvitation(\r\n      {\r\n        targetMailAddress: mail,\r\n      },\r\n      handleCloseDialog\r\n    );\r\n  };\r\n\r\n  const handleCloseDialog = () => {\r\n    closeDialogHandler();\r\n    setMail(\"\");\r\n  };\r\n\r\n  useEffect(() => {\r\n    setIsFormValid(validateMail(mail));\r\n  }, [mail, setIsFormValid]);\r\n\r\n  return (\r\n    <div>\r\n      <Dialog open={isDialogOpen} onClose={handleCloseDialog}>\r\n        <DialogTitle>\r\n          <Typography>Invite a Friend</Typography>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            <Typography>\r\n              Enter e-mail address of friend which you would like to invite\r\n            </Typography>\r\n          </DialogContentText>\r\n          <InputWithLabel\r\n            label=\"Mail\"\r\n            type=\"text\"\r\n            value={mail}\r\n            setValue={setMail}\r\n            placeholder=\"Enter mail address\"\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <CustomPrimaryButton\r\n            onClick={handleSendInvitation}\r\n            disabled={!isFormValid}\r\n            label=\"Send\"\r\n            additionalStyles={{\r\n              marginLeft: \"15px\",\r\n              marginRight: \"15px\",\r\n              marginBottom: \"10px\",\r\n            }}\r\n          />\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapActionsToProps = (dispatch) => {\r\n  return {\r\n    ...getActions(dispatch),\r\n  };\r\n};\r\n\r\nexport default connect(null, mapActionsToProps)(AddFriendDialog);\r\n","import React, { useState } from \"react\";\r\nimport CustomPrimaryButton from \"../../shared/components/CustomPrimaryButton\";\r\nimport AddFriendDialog from \"./AddFriendDialog\";\r\n\r\nconst additionalStyles = {\r\n  marginTop: \"10px\",\r\n  marginLeft: \"5px\",\r\n  width: \"80%\",\r\n  height: \"30px\",\r\n  background: \"#3ba55d\",\r\n};\r\n\r\nconst AddFriendButton = () => {\r\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\r\n\r\n  const handleOpenAddFriendDialog = () => {\r\n    setIsDialogOpen(true);\r\n  };\r\n\r\n  const handleCloseAddFriendDialog = () => {\r\n    setIsDialogOpen(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <CustomPrimaryButton\r\n        additionalStyles={additionalStyles}\r\n        label=\"Add Friend\"\r\n        onClick={handleOpenAddFriendDialog}\r\n      />\r\n      <AddFriendDialog\r\n        isDialogOpen={isDialogOpen}\r\n        closeDialogHandler={handleCloseAddFriendDialog}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AddFriendButton;\r\n","import React from \"react\";\r\nimport { Typography } from \"@mui/material\";\r\n\r\nconst FriendsTitle = ({ title }) => {\r\n  return (\r\n    <Typography\r\n      sx={{\r\n        textTransform: \"uppercase\",\r\n        color: \"#E1E1E1\",\r\n        fontSize: \"14px\",\r\n        marginTop: \"10px\",\r\n      }}\r\n    >\r\n      {title}\r\n    </Typography>\r\n  );\r\n};\r\n\r\nexport default FriendsTitle;\r\n","import React from \"react\";\r\nimport { Box } from \"@mui/material\";\r\nimport FiberManualRecordIcon from \"@mui/icons-material/FiberManualRecord\";\r\n\r\nconst OnlineIndicator = () => {\r\n  return (\r\n    <Box\r\n      sx={{\r\n        color: \"#3ba55d\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        position: \"absolute\",\r\n        right: \"5px\",\r\n      }}\r\n    >\r\n      <FiberManualRecordIcon />\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default OnlineIndicator;\r\n","import React from \"react\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Avatar from \"../../../shared/components/Avatar\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport OnlineIndicator from \"./OnlineIndicator\";\r\nimport { chatTypes, getActions } from \"../../../store/actions/chatActions\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst FriendsListItem = ({ id, username, isOnline, setChosenChatDetails }) => {\r\n  const handleChooseActiveConversation = () => {\r\n    setChosenChatDetails({ id: id, name: username }, chatTypes.DIRECT);\r\n  };\r\n\r\n  return (\r\n    <Button\r\n      onClick={handleChooseActiveConversation}\r\n      style={{\r\n        width: \"100%\",\r\n        height: \"42px\",\r\n        marginTop: \"10px\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"flex-start\",\r\n        textTransform: \"none\",\r\n        color: \"#F3F3F3\",\r\n        position: \"relative\",\r\n      }}\r\n    >\r\n      <Avatar username={username} />\r\n      <Typography\r\n        style={{\r\n          marginLeft: \"7px\",\r\n          fontWeight: 700,\r\n          color: \"#E1E1E1\",\r\n        }}\r\n        variant=\"subtitle1\"\r\n        align=\"left\"\r\n      >\r\n        {username}\r\n      </Typography>\r\n      {isOnline && <OnlineIndicator />}\r\n    </Button>\r\n  );\r\n};\r\n\r\nconst mapActionsToProps = (dispatch) => {\r\n  return {\r\n    ...getActions(dispatch),\r\n  };\r\n};\r\n\r\nexport default connect(null, mapActionsToProps)(FriendsListItem);\r\n","import React from \"react\";\r\nimport { styled } from \"@mui/system\";\r\nimport FriendsListItem from \"./FriendsListItem\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst MainContainer = styled(\"div\")({\r\n  flexGrow: 1,\r\n  width: \"100%\",\r\n});\r\n\r\nconst checkOnlineUsers = (friends = [], onlineUsers = []) => {\r\n  friends.forEach((f) => {\r\n    const isUserOnline = onlineUsers.find((user) => user.userId === f.id);\r\n    f.isOnline = isUserOnline ? true : false;\r\n  });\r\n\r\n  return friends;\r\n};\r\n\r\nconst FriendsList = ({ friends, onlineUsers }) => {\r\n  return (\r\n    <MainContainer>\r\n      {checkOnlineUsers(friends, onlineUsers).map((f) => (\r\n        <FriendsListItem\r\n          username={f.username}\r\n          id={f.id}\r\n          key={f.id}\r\n          isOnline={f.isOnline}\r\n        />\r\n      ))}\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nconst mapStoreStateToProps = ({ friends }) => {\r\n  return {\r\n    ...friends,\r\n  };\r\n};\r\n\r\nexport default connect(mapStoreStateToProps)(FriendsList);\r\n","import React from \"react\";\r\nimport CheckIcon from \"@mui/icons-material/Check\";\r\nimport ClearIcon from \"@mui/icons-material/Clear\";\r\nimport Box from \"@mui/material/Box\";\r\nimport IconButton from \"@mui/material/IconButton\";\r\n\r\nconst InvitationDecisionButtons = ({\r\n  disabled,\r\n  acceptInvitationHandler,\r\n  rejectInvitationHandler,\r\n}) => {\r\n  return (\r\n    <Box sx={{ display: \"flex\" }}>\r\n      <IconButton\r\n        style={{ color: \"white\" }}\r\n        disabled={disabled}\r\n        onClick={acceptInvitationHandler}\r\n      >\r\n        <CheckIcon />\r\n      </IconButton>\r\n      <IconButton\r\n        style={{ color: \"white\" }}\r\n        disabled={disabled}\r\n        onClick={rejectInvitationHandler}\r\n      >\r\n        <ClearIcon />\r\n      </IconButton>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default InvitationDecisionButtons;\r\n","import React, { useState } from \"react\";\r\nimport { Tooltip, Typography, Box } from \"@mui/material\";\r\nimport Avatar from \"../../../shared/components/Avatar\";\r\nimport InvitationDecisionButtons from \"./InvitationDecisionButtons\";\r\nimport { connect } from \"react-redux\";\r\nimport { getActions } from \"../../../store/actions/friendsActions\";\r\n\r\nconst PendingInvitationsListItem = ({\r\n  id,\r\n  username,\r\n  mail,\r\n  acceptFriendInvitation = () => {},\r\n  rejectFriendInvitation = () => {},\r\n}) => {\r\n  const [buttonsDisabled, setButtonsDisabled] = useState(false);\r\n\r\n  const handleAcceptInvitation = () => {\r\n    console.log(id);\r\n    acceptFriendInvitation({ id });\r\n    setButtonsDisabled(true);\r\n  };\r\n\r\n  const handleRejectInvitation = () => {\r\n    console.log(id);\r\n    rejectFriendInvitation({ id });\r\n    setButtonsDisabled(true);\r\n  };\r\n\r\n  return (\r\n    <Tooltip title={mail}>\r\n      <div style={{ width: \"100%\" }}>\r\n        <Box\r\n          sx={{\r\n            width: \"100%\",\r\n            height: \"42px\",\r\n            marginTop: \"10px\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"space-between\",\r\n          }}\r\n        >\r\n          <Avatar username={username} />\r\n          <Typography\r\n            sx={{\r\n              marginLeft: \"7px\",\r\n              fontWeight: 700,\r\n              color: \"#8e9297\",\r\n              flexGrow: 1,\r\n            }}\r\n            variant=\"subtitle1\"\r\n          >\r\n            {username}\r\n          </Typography>\r\n          <InvitationDecisionButtons\r\n            disabled={buttonsDisabled}\r\n            acceptInvitationHandler={handleAcceptInvitation}\r\n            rejectInvitationHandler={handleRejectInvitation}\r\n          />\r\n        </Box>\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n};\r\n\r\nconst mapActionsToProps = (dispatch) => {\r\n  return {\r\n    ...getActions(dispatch),\r\n  };\r\n};\r\n\r\nexport default connect(null, mapActionsToProps)(PendingInvitationsListItem);\r\n","import React from \"react\";\r\nimport { styled } from \"@mui/system\";\r\nimport PendingInvitationsListItem from \"./PendingInvitationsListItem\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst MainContainer = styled(\"div\")({\r\n  width: \"100%\",\r\n  height: \"22%\",\r\n  display: \"flex\",\r\n  flexDirection: \"column\",\r\n  alignItems: \"center\",\r\n  overflow: \"auto\",\r\n});\r\n\r\nconst PendingInvitationsList = ({ pendingFriendsInvitations }) => {\r\n  return (\r\n    <MainContainer>\r\n      {pendingFriendsInvitations.map((invitation) => (\r\n        <PendingInvitationsListItem\r\n          key={invitation._id}\r\n          id={invitation._id}\r\n          username={invitation.senderId.username}\r\n          mail={invitation.senderId.mail}\r\n        />\r\n      ))}\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nconst mapStoreStateToProps = ({ friends }) => {\r\n  return {\r\n    ...friends,\r\n  };\r\n};\r\n\r\nexport default connect(mapStoreStateToProps)(PendingInvitationsList);\r\n","import React from \"react\";\r\nimport { styled } from \"@mui/system\";\r\nimport AddFriendButton from \"./AddFriendButton\";\r\nimport FriendsTitle from \"./FriendsTitle\";\r\nimport FriendsList from \"./FriendsList/FriendsList\";\r\nimport PendingInvitationsList from \"./PendingInvitationsList/PendingInvitationsList\";\r\n\r\nconst MainContainer = styled(\"div\")({\r\n  width: \"224px\",\r\n  height: \"100%\",\r\n  display: \"flex\",\r\n  flexDirection: \"column\",\r\n  alignItems: \"center\",\r\n  backgroundColor: \"#141414\",\r\n});\r\n\r\nconst FriendsSideBar = () => {\r\n  return (\r\n    <MainContainer>\r\n      <AddFriendButton />\r\n      <FriendsTitle title=\"Private Messages\" />\r\n      <FriendsList />\r\n      <FriendsTitle title=\"Invitations\" />\r\n      <PendingInvitationsList />\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default FriendsSideBar;\r\n","import React from \"react\";\r\nimport { Typography } from \"@mui/material\";\r\nimport { styled } from \"@mui/system\";\r\n\r\nconst Wrapper = styled(\"div\")({\r\n  flexGrow: 1,\r\n  height: \"100%\",\r\n  display: \"flex\",\r\n  alignItems: \"center\",\r\n  justifyContent: \"center\",\r\n});\r\n\r\nconst WelcomeMessage = () => {\r\n  return (\r\n    <Wrapper>\r\n      <Typography variant=\"h6\" sx={{ color: \"#FFFFFF\" }}>\r\n        To start chatting - choose conversation\r\n      </Typography>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default WelcomeMessage;\r\n","import React from \"react\";\r\nimport { styled } from \"@mui/system\";\r\nimport Avatar from \"../../../shared/components/Avatar\";\r\nimport Typography from \"@mui/material/Typography\";\r\n\r\nconst MainContainer = styled(\"div\")({\r\n  width: \"98%\",\r\n  display: \"column\",\r\n  marginTop: \"10px\",\r\n});\r\n\r\nconst MessagesHeader = ({ name = \"\" }) => {\r\n  return (\r\n    <MainContainer>\r\n      <Avatar large username={name} />\r\n      <Typography\r\n        variant=\"h4\"\r\n        sx={{\r\n          fontWeight: \"bold\",\r\n          color: \"white\",\r\n          marginLeft: \"5px\",\r\n          marginRight: \"5px\",\r\n        }}\r\n      >\r\n        {name}\r\n      </Typography>\r\n      <Typography\r\n        sx={{\r\n          color: \"#b9bbbe\",\r\n          marginLeft: \"5px\",\r\n          marginRight: \"5px\",\r\n        }}\r\n      >\r\n        This is the beginning of your conversation with {name}\r\n      </Typography>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default MessagesHeader;\r\n","import React from \"react\";\r\nimport { styled } from \"@mui/system\";\r\nimport Avatar from \"../../../shared/components/Avatar\";\r\nimport Typography from \"@mui/material/Typography\";\r\n\r\nconst MainContainer = styled(\"div\")({\r\n  width: \"97%\",\r\n  display: \"flex\",\r\n  marginTop: \"10px\",\r\n});\r\n\r\nconst AvatarContainer = styled(\"div\")({\r\n  width: \"70px\",\r\n});\r\n\r\nconst MessageContainer = styled(\"div\")({\r\n  display: \"flex\",\r\n  flexDirection: \"column\",\r\n});\r\n\r\nconst MessageContent = styled(\"div\")({\r\n  color: \"#DCDDDE\",\r\n});\r\n\r\nconst SameAuthorMessageContent = styled(\"div\")({\r\n  color: \"#DCDDDE\",\r\n  width: \"97%\",\r\n});\r\n\r\nconst SameAuthorMessageText = styled(\"span\")({\r\n  marginLeft: \"70px\",\r\n});\r\n\r\nconst Message = ({ content, sameAuthor, username, date, sameDay }) => {\r\n  if (sameAuthor && sameDay) {\r\n    return (\r\n      <SameAuthorMessageContent>\r\n        <SameAuthorMessageText>{content}</SameAuthorMessageText>\r\n      </SameAuthorMessageContent>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <MainContainer>\r\n      <AvatarContainer>\r\n        <Avatar username={username} />\r\n      </AvatarContainer>\r\n      <MessageContainer>\r\n        <Typography style={{ fontSize: \"16px\", color: \"white\" }}>\r\n          {username}{\" \"}\r\n          <span style={{ fontSize: \"12px\", color: \"#72767d\" }}>{date}</span>\r\n        </Typography>\r\n        <MessageContent>{content}</MessageContent>\r\n      </MessageContainer>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default Message;\r\n","import React from \"react\";\r\nimport { styled } from \"@mui/system\";\r\n\r\nconst Separator = styled(\"div\")({\r\n  width: \"95%\",\r\n  backgroundColor: \"#b9bbbe\",\r\n  height: \"1px\",\r\n  position: \"relative\",\r\n  marginTop: \"20px\",\r\n  marginBottom: \"10px\",\r\n});\r\n\r\nconst DateLabel = styled(\"span\")({\r\n  backgroundColor: \"#36393f\",\r\n  position: \"absolute\",\r\n  left: \"45%\",\r\n  top: \"-10px\",\r\n  color: \"#b9bbbe\",\r\n  padding: \"0 5px\",\r\n  fontSize: \"14px\",\r\n});\r\n\r\nconst DateSeparator = ({ date }) => {\r\n  return (\r\n    <Separator>\r\n      <DateLabel>{date}</DateLabel>\r\n    </Separator>\r\n  );\r\n};\r\n\r\nexport default DateSeparator;\r\n","import React, { userRef, useEffect } from \"react\";\r\nimport { styled } from \"@mui/system\";\r\nimport MessagesHeader from \"./MessagesHeader\";\r\nimport { connect } from \"react-redux\";\r\nimport DUMMY_MESSAGES from \"./DUMMY_MESSAGES\";\r\nimport Message from \"./Message\";\r\nimport DateSeparator from \"./DateSeparator\";\r\n\r\nconst MainContainer = styled(\"div\")({\r\n  height: \"calc(100% - 60px)\",\r\n  overflow: \"auto\",\r\n  display: \"flex\",\r\n  flexDirection: \"column\",\r\n  alignItems: \"center\",\r\n});\r\n\r\nconst convertDateToHumanReadable = (date, format) => {\r\n  const map = {\r\n    mm: date.getMonth() + 1,\r\n    dd: date.getDate(),\r\n    yy: date.getFullYear().toString().slice(-2),\r\n    yyyy: date.getFullYear(),\r\n  };\r\n\r\n  return format.replace(/mm|dd|yy|yyy/gi, (matched) => map[matched]);\r\n};\r\n\r\nconst Messages = ({ chosenChatDetails, messages }) => {\r\n  return (\r\n    <MainContainer>\r\n      <MessagesHeader name={chosenChatDetails?.name} />\r\n      {messages.map((message, index) => {\r\n        const sameAuthor =\r\n          index > 0 &&\r\n          messages[index].author._id === messages[index - 1].author._id;\r\n\r\n        const sameDay =\r\n          index > 0 &&\r\n          convertDateToHumanReadable(new Date(message.date), \"dd/mm/yy\") ===\r\n            convertDateToHumanReadable(\r\n              new Date(messages[index - 1].date),\r\n              \"dd/mm/yy\"\r\n            );\r\n\r\n        return (\r\n          <div key={message._id} style={{ width: \"97%\" }}>\r\n            {(!sameDay || index === 0) && (\r\n              <DateSeparator\r\n                date={convertDateToHumanReadable(\r\n                  new Date(message.date),\r\n                  \"dd/mm/yy\"\r\n                )}\r\n              />\r\n            )}\r\n            <Message\r\n              content={message.content}\r\n              username={message.author.username}\r\n              sameAuthor={sameAuthor}\r\n              date={convertDateToHumanReadable(\r\n                new Date(message.date),\r\n                \"dd/mm/yy\"\r\n              )}\r\n              sameDay={sameDay}\r\n            />\r\n          </div>\r\n        );\r\n      })}\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nconst mapStoreStateToProps = ({ chat }) => {\r\n  return {\r\n    ...chat,\r\n  };\r\n};\r\n\r\nexport default connect(mapStoreStateToProps)(Messages);\r\n","import React, { useState } from \"react\";\r\nimport { styled } from \"@mui/system\";\r\nimport { connect } from \"react-redux\";\r\nimport { sendDirectMessage } from \"../../realtimeCommunication/socketConnection\";\r\n\r\nconst MainContainer = styled(\"div\")({\r\n  height: \"60px\",\r\n  width: \"100%\",\r\n  display: \"flex\",\r\n  alignItems: \"center\",\r\n  justifyContent: \"center\",\r\n});\r\n\r\nconst Input = styled(\"input\")({\r\n  backgroundColor: \"#2f3136\",\r\n  width: \"98%\",\r\n  height: \"44px\",\r\n  color: \"white\",\r\n  border: \"none\",\r\n  borderRadius: \"8px\",\r\n  fontSize: \"14px\",\r\n  padding: \"0 10px\",\r\n});\r\n\r\nconst NewMessageInput = ({ chosenChatDetails }) => {\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  const handleMessageValueChange = (event) => {\r\n    setMessage(event.target.value);\r\n  };\r\n\r\n  const handleKeyPressed = (event) => {\r\n    if (event.key === \"Enter\") {\r\n      handleSendMessage();\r\n    }\r\n  };\r\n\r\n  const handleSendMessage = () => {\r\n    if (message.length > 0) {\r\n      sendDirectMessage({\r\n        receiverUserId: chosenChatDetails.id,\r\n        content: message,\r\n      });\r\n      setMessage(\"\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <MainContainer>\r\n      <Input\r\n        placeholder={`Write message to ${chosenChatDetails.name}`}\r\n        value={message}\r\n        onChange={handleMessageValueChange}\r\n        onKeyDown={handleKeyPressed}\r\n      />\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nconst mapStoreStateToProps = ({ chat }) => {\r\n  return {\r\n    ...chat,\r\n  };\r\n};\r\n\r\nexport default connect(mapStoreStateToProps)(NewMessageInput);\r\n","import React, { useEffect } from \"react\";\r\nimport { styled } from \"@mui/system\";\r\nimport Messages from \"./Messages/Messages\";\r\nimport NewMessageInput from \"./NewMessageInput\";\r\nimport { getDirectChatHistory } from \"../../realtimeCommunication/socketConnection\";\r\n\r\nconst Wrapper = styled(\"div\")({\r\n  flexGrow: 1,\r\n});\r\n\r\nconst MessengerContent = ({ chosenChatDetails }) => {\r\n  useEffect(() => {\r\n    getDirectChatHistory({\r\n      receiverUserId: chosenChatDetails.id,\r\n    });\r\n  }, [chosenChatDetails]);\r\n\r\n  return (\r\n    <Wrapper>\r\n      <Messages />\r\n      <NewMessageInput />\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default MessengerContent;\r\n","import React from \"react\";\r\nimport { styled } from \"@mui/system\";\r\nimport { connect } from \"react-redux\";\r\nimport WelcomeMessage from \"./WelcomeMessage\";\r\nimport MessengerContent from \"./MessengerContent\";\r\n\r\nconst MainContainer = styled(\"div\")({\r\n  flexGrow: 1,\r\n  backgroundColor: \"#1B1B1B\",\r\n  marginTop: \"48px\",\r\n  display: \"flex\",\r\n});\r\n\r\nconst Messenger = ({ chosenChatDetails }) => {\r\n  return (\r\n    <MainContainer>\r\n      {!chosenChatDetails ? (\r\n        <WelcomeMessage />\r\n      ) : (\r\n        <MessengerContent chosenChatDetails={chosenChatDetails} />\r\n      )}\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nconst mapStoreStateToProps = ({ chat }) => {\r\n  return {\r\n    ...chat,\r\n  };\r\n};\r\n\r\nexport default connect(mapStoreStateToProps)(Messenger);\r\n","import * as React from \"react\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Menu from \"@mui/material/Menu\";\r\nimport MenuItem from \"@mui/material/MenuItem\";\r\nimport { IconButton } from \"@mui/material\";\r\nimport MoreVertIcon from \"@mui/icons-material/MoreVert\";\r\nimport { logout } from \"../../shared/utils/auth\";\r\nimport { getActions } from \"../../store/actions/roomActions\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst BasicMenu = ({ audioOnly, setAudioOnly }) => {\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const open = Boolean(anchorEl);\r\n\r\n  const handleMenuOpen = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n  const handleMenuClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const handleAudioOnlyChange = () => {\r\n    setAudioOnly(!audioOnly);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IconButton onClick={handleMenuOpen} style={{ color: \"#FFFFFF\" }}>\r\n        <MoreVertIcon />\r\n      </IconButton>\r\n      <Menu\r\n        id=\"basic-menu\"\r\n        anchorEl={anchorEl}\r\n        open={open}\r\n        onClose={handleMenuClose}\r\n        MenuListProps={{\r\n          \"aria-labelledby\": \"basic-button\",\r\n        }}\r\n      >\r\n        <MenuItem onClick={logout} style={{ color: \"#000000\" }}>\r\n          Logout\r\n        </MenuItem>\r\n        <MenuItem onClick={handleAudioOnlyChange} style={{ color: \"#000000\" }}>\r\n          {audioOnly ? \"Audio Only Enabled\" : \"Audio Only Disabled\"}\r\n        </MenuItem>\r\n      </Menu>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStoreStateToProps = ({ room }) => {\r\n  return {\r\n    ...room,\r\n  };\r\n};\r\n\r\nconst mapActionsToProps = (dispatch) => {\r\n  return {\r\n    ...getActions(dispatch),\r\n  };\r\n};\r\n\r\nexport default connect(mapStoreStateToProps, mapActionsToProps)(BasicMenu);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Typography } from \"@mui/material\";\r\n\r\nconst ChosenOptionLabel = ({ name }) => {\r\n  return (\r\n    <Typography\r\n      sx={{ fontSize: \"16px\", color: \"white\", fontWeight: \"bold\" }}\r\n    >{`${name ? `Chosen conversation: ${name}` : \"\"}`}</Typography>\r\n  );\r\n};\r\n\r\nconst mapStoreStateToProps = (state) => {\r\n  return {\r\n    name: state.chat.chosenChatDetails?.name,\r\n  };\r\n};\r\n\r\nexport default connect(mapStoreStateToProps)(ChosenOptionLabel);\r\n","import React from \"react\";\r\nimport { styled } from \"@mui/system\";\r\nimport DropdownMenu from \"./DropdownMenu\";\r\nimport ChosenOptionLabel from \"./ChosenOptionLabel\";\r\n\r\nconst MainContainer = styled(\"div\")({\r\n  position: \"absolute\",\r\n  right: \"0\",\r\n  top: \"0\",\r\n  height: \"48px\",\r\n  borderBottom: \"1px solid black\",\r\n  backgroundColor: \"#1B1B1B\",\r\n  width: \"calc(100% - 326px)\",\r\n  display: \"flex\",\r\n  alignItems: \"center\",\r\n  justifyContent: \"space-between\",\r\n  padding: \"0 15px\",\r\n});\r\n\r\nconst AppBar = () => {\r\n  return (\r\n    <MainContainer>\r\n      <ChosenOptionLabel />\r\n      <DropdownMenu />\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default AppBar;\r\n","import React from \"react\";\r\nimport { styled } from \"@mui/system\";\r\nimport IconButton from \"@mui/material/IconButton\";\r\nimport CloseFullscreenIcon from \"@mui/icons-material/CloseFullscreen\";\r\nimport OpenInFullIcon from \"@mui/icons-material/OpenInFull\";\r\n\r\nconst MainContainer = styled(\"div\")({\r\n  position: \"absolute\",\r\n  bottom: \"3px\",\r\n  right: \"3px\",\r\n});\r\n\r\nconst ResizeRoomButton = ({ isRoomMinimized, handleRoomResize }) => {\r\n  return (\r\n    <MainContainer>\r\n      <IconButton style={{ color: \"white\" }} onClick={handleRoomResize}>\r\n        {isRoomMinimized ? <OpenInFullIcon /> : <CloseFullscreenIcon />}\r\n      </IconButton>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default ResizeRoomButton;\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport { styled } from \"@mui/system\";\r\n\r\nconst MainContainer = styled(\"div\")({\r\n  height: \"50%\",\r\n  width: \"50%\",\r\n  backgroundColor: \"black\",\r\n  borderRadius: \"8px\",\r\n});\r\n\r\nconst VideoEl = styled(\"video\")({\r\n  width: \"100%\",\r\n  height: \"100%\",\r\n});\r\n\r\nconst Video = ({ stream, isLocalStream }) => {\r\n  const videoRef = useRef();\r\n\r\n  useEffect(() => {\r\n    const video = videoRef.current;\r\n    video.srcObject = stream;\r\n\r\n    video.onloadedmetadata = () => {\r\n      video.play();\r\n    };\r\n  }, [stream]);\r\n\r\n  return (\r\n    <MainContainer>\r\n      <VideoEl ref={videoRef} autoPlay muted={isLocalStream ? true : false} />\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default Video;\r\n","import React from \"react\";\r\nimport { styled } from \"@mui/system\";\r\nimport { connect } from \"react-redux\";\r\nimport Video from \"./Video\";\r\n\r\nconst MainContainer = styled(\"div\")({\r\n  height: \"85%\",\r\n  width: \"100%\",\r\n  display: \"flex\",\r\n  flexWrap: \"wrap\",\r\n});\r\n\r\nconst VideosContainer = ({\r\n  localStream,\r\n  remoteStreams,\r\n  screenSharingStream,\r\n}) => {\r\n  return (\r\n    <MainContainer>\r\n      <Video\r\n        stream={screenSharingStream ? screenSharingStream : localStream}\r\n        isLocalStream\r\n      />\r\n      {remoteStreams.map((stream) => (\r\n        <Video stream={stream} key={stream.id} />\r\n      ))}\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nconst mapStoreStateToProps = ({ room }) => {\r\n  return {\r\n    ...room,\r\n  };\r\n};\r\n\r\nexport default connect(mapStoreStateToProps)(VideosContainer);\r\n","import React, { useState } from \"react\";\r\nimport IconButton from \"@mui/material/IconButton\";\r\nimport VideocamIcon from \"@mui/icons-material/Videocam\";\r\nimport VideocamOffIcon from \"@mui/icons-material/VideocamOff\";\r\n\r\nconst CameraButton = ({ localStream }) => {\r\n  const [cameraEnabled, setCameraEnabled] = useState(true);\r\n\r\n  const handleToggleCamera = () => {\r\n    localStream.getVideoTracks()[0].enabled = !cameraEnabled;\r\n    setCameraEnabled(!cameraEnabled);\r\n  };\r\n\r\n  return (\r\n    <IconButton onClick={handleToggleCamera} style={{ color: \"white\" }}>\r\n      {cameraEnabled ? <VideocamIcon /> : <VideocamOffIcon />}\r\n    </IconButton>\r\n  );\r\n};\r\n\r\nexport default CameraButton;\r\n","import React, { useState } from \"react\";\r\nimport IconButton from \"@mui/material/IconButton\";\r\nimport MicIcon from \"@mui/icons-material/Mic\";\r\nimport MicOffIcon from \"@mui/icons-material/MicOff\";\r\n\r\nconst MicButton = ({ localStream }) => {\r\n  const [micEnabled, setMicEnabled] = useState(true);\r\n\r\n  const handleToggleMic = () => {\r\n    localStream.getAudioTracks()[0].enabled = !micEnabled;\r\n    setMicEnabled(!micEnabled);\r\n  };\r\n\r\n  return (\r\n    <IconButton onClick={handleToggleMic} style={{ color: \"white\" }}>\r\n      {micEnabled ? <MicIcon /> : <MicOffIcon />}\r\n    </IconButton>\r\n  );\r\n};\r\n\r\nexport default MicButton;\r\n","import React from \"react\";\r\nimport IconButton from \"@mui/material/IconButton\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport * as roomHandler from \"../../../realtimeCommunication/roomHandler\";\r\n\r\nconst CloseRoomButton = () => {\r\n  const handleLeaveRoom = () => {\r\n    roomHandler.leaveRoom();\r\n  };\r\n\r\n  return (\r\n    <IconButton onClick={handleLeaveRoom} style={{ color: \"white\" }}>\r\n      <CloseIcon />\r\n    </IconButton>\r\n  );\r\n};\r\n\r\nexport default CloseRoomButton;\r\n","import React, { useState } from \"react\";\r\nimport IconButton from \"@mui/material/IconButton\";\r\nimport ScreenShareIcon from \"@mui/icons-material/ScreenShare\";\r\nimport StopScreenShareIcon from \"@mui/icons-material/StopScreenShare\";\r\nimport * as webRTCHandler from \"../../../realtimeCommunication/webRTCHandler\";\r\n\r\nconst constraints = {\r\n  audio: false,\r\n  video: true,\r\n};\r\n\r\nconst ScreenShareButton = ({\r\n  localStream,\r\n  screenSharingStream,\r\n  setScreenSharingStream,\r\n  isScreenSharingActive,\r\n}) => {\r\n  const handleScreenShareToggle = async () => {\r\n    if (!isScreenSharingActive) {\r\n      let stream = null;\r\n      try {\r\n        stream = await navigator.mediaDevices.getDisplayMedia(constraints);\r\n      } catch (err) {\r\n        console.log(\r\n          \"error occured when trying to get an access to screen share stream\"\r\n        );\r\n      }\r\n\r\n      if (stream) {\r\n        setScreenSharingStream(stream);\r\n        webRTCHandler.switchOutgoingTracks(stream);\r\n      }\r\n    } else {\r\n      webRTCHandler.switchOutgoingTracks(localStream);\r\n      screenSharingStream.getTracks().forEach((t) => t.stop());\r\n      setScreenSharingStream(null);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <IconButton onClick={handleScreenShareToggle} style={{ color: \"white\" }}>\r\n      {isScreenSharingActive ? <StopScreenShareIcon /> : <ScreenShareIcon />}\r\n    </IconButton>\r\n  );\r\n};\r\n\r\nexport default ScreenShareButton;\r\n","import React from \"react\";\r\nimport { styled } from \"@mui/system\";\r\nimport CameraButton from \"./CameraButton\";\r\nimport MicButton from \"./MicButton\";\r\nimport CloseRoomButton from \"./CloseRoomButton\";\r\nimport ScreenShareButton from \"./ScreenShareButton\";\r\nimport { connect } from \"react-redux\";\r\nimport { getActions } from \"../../../store/actions/roomActions\";\r\n\r\nconst MainContainer = styled(\"div\")({\r\n  height: \"15%\",\r\n  width: \"100%\",\r\n  backgroundColor: \"#67063c\",\r\n  borderTopLeftRadius: \"8px\",\r\n  borderTopRightRadius: \"8px\",\r\n  display: \"flex\",\r\n  alignItems: \"center\",\r\n  justifyContent: \"center\",\r\n});\r\n\r\nconst RoomButtons = (props) => {\r\n  const { localStream, isUserJoinedWithOnlyAudio } = props;\r\n\r\n  return (\r\n    <MainContainer>\r\n      {!isUserJoinedWithOnlyAudio && <ScreenShareButton {...props} />}\r\n      <MicButton localStream={localStream} />\r\n      <CloseRoomButton />\r\n      {!isUserJoinedWithOnlyAudio && <CameraButton localStream={localStream} />}\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nconst mapStoreStateToProps = ({ room }) => {\r\n  return {\r\n    ...room,\r\n  };\r\n};\r\n\r\nconst mapActionsToProps = (dispatch) => {\r\n  return {\r\n    ...getActions(dispatch),\r\n  };\r\n};\r\n\r\nexport default connect(mapStoreStateToProps, mapActionsToProps)(RoomButtons);\r\n","import React, { useState } from \"react\";\r\nimport { styled } from \"@mui/system\";\r\nimport ResizeRoomButton from \"./ResizeRoomButton\";\r\nimport VideosContainer from \"./VideosContainer\";\r\nimport RoomButtons from \"./RoomButtons/RoomButtons\";\r\n\r\nconst MainContainer = styled(\"div\")({\r\n  position: \"absolute\",\r\n  borderRadius: \"8px\",\r\n  display: \"flex\",\r\n  flexDirection: \"column\",\r\n  alignItems: \"center\",\r\n  justifyContent: \"center\",\r\n  backgroundColor: \"#141414\",\r\n});\r\n\r\nconst fullScreenRoomStyle = {\r\n  width: \"100%\",\r\n  height: \"100vh\",\r\n};\r\n\r\nconst minimizedRoomStyle = {\r\n  bottom: \"0px\",\r\n  right: \"0px\",\r\n  width: \"30%\",\r\n  height: \"40vh\",\r\n};\r\n\r\nconst Room = () => {\r\n  const [isRoomMinimized, setIsRoomMinimized] = useState(true);\r\n\r\n  const roomResizeHandler = () => {\r\n    setIsRoomMinimized(!isRoomMinimized);\r\n  };\r\n\r\n  return (\r\n    <MainContainer\r\n      style={isRoomMinimized ? minimizedRoomStyle : fullScreenRoomStyle}\r\n    >\r\n      <VideosContainer />\r\n      <RoomButtons />\r\n      <ResizeRoomButton\r\n        isRoomMinimized={isRoomMinimized}\r\n        handleRoomResize={roomResizeHandler}\r\n      />\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default Room;\r\n","import React, { useEffect } from \"react\";\r\nimport { styled } from \"@mui/system\";\r\nimport SideBar from \"./SideBar/SideBar\";\r\nimport FriendsSideBar from \"./FriendsSideBar/FriendsSideBar\";\r\nimport Messenger from \"./Messenger/Messenger\";\r\nimport AppBar from \"./AppBar/AppBar\";\r\nimport { logout } from \"../shared/utils/auth\";\r\nimport { connect } from \"react-redux\";\r\nimport { getActions } from \"../store/actions/authActions\";\r\nimport { connectWithSocketServer } from \"../realtimeCommunication/socketConnection\";\r\nimport Room from \"./Room/Room\";\r\n\r\nconst Wrapper = styled(\"div\")({\r\n  width: \"100%\",\r\n  height: \"100vh\",\r\n  display: \"flex\",\r\n});\r\n\r\nconst Dashboard = ({ setUserDetails, isUserInRoom }) => {\r\n  useEffect(() => {\r\n    const userDetails = localStorage.getItem(\"user\");\r\n\r\n    if (!userDetails) {\r\n      logout();\r\n    } else {\r\n      setUserDetails(JSON.parse(userDetails));\r\n      connectWithSocketServer(JSON.parse(userDetails));\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <Wrapper>\r\n      <SideBar />\r\n      <FriendsSideBar />\r\n      <Messenger />\r\n      <AppBar />\r\n      {isUserInRoom && <Room />}\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nconst mapStoreStateToProps = ({ room }) => {\r\n  return {\r\n    ...room,\r\n  };\r\n};\r\n\r\nconst mapActionsToProps = (dispatch) => {\r\n  return {\r\n    ...getActions(dispatch),\r\n  };\r\n};\r\n\r\nexport default connect(mapStoreStateToProps, mapActionsToProps)(Dashboard);\r\n","import React from \"react\";\r\nimport Alert from \"@mui/material/Alert\";\r\nimport Snackbar from \"@mui/material/Snackbar\";\r\nimport { connect } from \"react-redux\";\r\nimport { getActions } from \"../../store/actions/alertActions\";\r\n\r\nconst AlertNotification = ({\r\n  showAlertMessage, // Comming from alertReducer\r\n  closeAlertMessage, // Comming from alertActions\r\n  alertMessageContent, // Comming from alertReducer\r\n}) => {\r\n  return (\r\n    <Snackbar\r\n      anchorOrigin={{ vertical: \"bottom\", horizontal: \"center\" }}\r\n      open={showAlertMessage}\r\n      onClose={closeAlertMessage}\r\n      autoHideDuration={6000}\r\n    >\r\n      <Alert severity=\"info\">{alertMessageContent}</Alert>\r\n    </Snackbar>\r\n  );\r\n};\r\n\r\nconst mapStoreStateToProps = ({ alert }) => {\r\n  return {\r\n    ...alert,\r\n  };\r\n};\r\n\r\nconst mapActionsToProps = (dispatch) => {\r\n  return {\r\n    ...getActions(dispatch),\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStoreStateToProps,\r\n  mapActionsToProps\r\n)(AlertNotification);\r\n","import React from \"react\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n} from \"react-router-dom\";\nimport LoginPage from \"./authPages/LoginPage/LoginPage\";\nimport RegisterPage from \"./authPages/RegisterPage/RegisterPage\";\nimport Dashboard from \"./Dashboard/Dashboard\";\nimport AlertNotification from \"./shared/components/AlertNotification\";\n\nimport \"./App.css\";\n\nfunction App() {\n  return (\n    <>\n      <Router>\n        <Switch>\n          <Route exact path=\"/login\">\n            <LoginPage />\n          </Route>\n          <Route exact path=\"/register\">\n            <RegisterPage />\n          </Route>\n          <Route exact path=\"/dashboard\">\n            <Dashboard />\n          </Route>\n          <Route path=\"/\">\n            <Redirect to=\"/dashboard\" />\n          </Route>\n        </Switch>\n      </Router>\n      <AlertNotification />\n    </>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { Provider } from \"react-redux\";\nimport store from \"./store/store\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}