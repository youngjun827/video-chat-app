{"ast":null,"code":"import * as api from \"../../api\";\nimport { openAlertMessage } from \"./alertActions\";\nexport const authActions = {\n  SET_USER_DETAILS: \"AUTH.SET_USER_DETAILS\"\n};\nexport const getActions = dispatch => {\n  return {\n    // And tadah! the login function is here.\n    // 4. The login function is using the userDetails (userDetails, history) to execute the dispatch method.\n    login: (userDetails, history) => dispatch(login(userDetails, history)),\n    register: (userDetails, history) => dispatch(register(userDetails, history)),\n    setUserDetails: userDetails => dispatch(setUserDetails(userDetails))\n  };\n};\n\nconst setUserDetails = userDetails => {\n  // 7. Here the setUserDetails function will send the current STATE and send the userDetails to the authReducer.\n  return {\n    type: authActions.SET_USER_DETAILS,\n    userDetails\n  };\n}; // the login function\n\n\nconst login = (userDetails, history) => {\n  return async dispatch => {\n    // 5. To execute the dispatch method the \"userDetails\" goes through the API, server then the database to be VALIDATED. Until then the login function WAIT for the api to send a response BACK to be used to \"login\" function. Lets try to navigate to our API.\n    const response = await api.login(userDetails);\n    console.log(response); // If there is an error show the Alert Messages\n\n    if (response.error) {\n      var _response$exception, _response$exception$r;\n\n      dispatch(openAlertMessage(response === null || response === void 0 ? void 0 : (_response$exception = response.exception) === null || _response$exception === void 0 ? void 0 : (_response$exception$r = _response$exception.response) === null || _response$exception$r === void 0 ? void 0 : _response$exception$r.data));\n    } else {\n      // 18. the updated userDetails from the backend server is assigned to userDetails.\n      const {\n        userDetails\n      } = response === null || response === void 0 ? void 0 : response.data; // then the userDetails gets STORED at the localStorage of the browser. Why? Check my blog in my website about localStorage and its functionality ;)\n\n      localStorage.setItem(\"user\", JSON.stringify(userDetails)); // Then, thanks to the redux-thunk, the dispatch method can be used at the \"setUserDetails\" function to send the ACTION OBJECT to the authReducer.\n\n      dispatch(setUserDetails(userDetails)); // 9. The user is redirected to the dashboard.\n\n      history.push(\"/dashboard\");\n    }\n  };\n};\n\nconst register = (userDetails, history) => {\n  return async dispatch => {\n    const response = await api.register(userDetails);\n    console.log(response);\n\n    if (response.error) {\n      var _response$exception2, _response$exception2$;\n\n      dispatch(openAlertMessage(response === null || response === void 0 ? void 0 : (_response$exception2 = response.exception) === null || _response$exception2 === void 0 ? void 0 : (_response$exception2$ = _response$exception2.response) === null || _response$exception2$ === void 0 ? void 0 : _response$exception2$.data));\n    } else {\n      const {\n        userDetails\n      } = response === null || response === void 0 ? void 0 : response.data;\n      localStorage.setItem(\"user\", JSON.stringify(userDetails));\n      dispatch(setUserDetails(userDetails));\n      history.push(\"/dashboard\");\n    }\n  };\n};","map":{"version":3,"names":["api","openAlertMessage","authActions","SET_USER_DETAILS","getActions","dispatch","login","userDetails","history","register","setUserDetails","type","response","console","log","error","exception","data","localStorage","setItem","JSON","stringify","push"],"sources":["/Users/youngjun827/dev/discord-app/discord-frontend/src/store/actions/authActions.js"],"sourcesContent":["import * as api from \"../../api\";\r\nimport { openAlertMessage } from \"./alertActions\";\r\n\r\nexport const authActions = {\r\n  SET_USER_DETAILS: \"AUTH.SET_USER_DETAILS\",\r\n};\r\n\r\nexport const getActions = (dispatch) => {\r\n  return {\r\n    // And tadah! the login function is here.\r\n    // 4. The login function is using the userDetails (userDetails, history) to execute the dispatch method.\r\n    login: (userDetails, history) => dispatch(login(userDetails, history)),\r\n    register: (userDetails, history) =>\r\n      dispatch(register(userDetails, history)),\r\n    setUserDetails: (userDetails) => dispatch(setUserDetails(userDetails)),\r\n  };\r\n};\r\n\r\nconst setUserDetails = (userDetails) => {\r\n  // 7. Here the setUserDetails function will send the current STATE and send the userDetails to the authReducer.\r\n  return {\r\n    type: authActions.SET_USER_DETAILS,\r\n    userDetails,\r\n  };\r\n};\r\n\r\n// the login function\r\nconst login = (userDetails, history) => {\r\n  return async (dispatch) => {\r\n    // 5. To execute the dispatch method the \"userDetails\" goes through the API, server then the database to be VALIDATED. Until then the login function WAIT for the api to send a response BACK to be used to \"login\" function. Lets try to navigate to our API.\r\n    const response = await api.login(userDetails);\r\n    console.log(response);\r\n    // If there is an error show the Alert Messages\r\n    if (response.error) {\r\n      dispatch(openAlertMessage(response?.exception?.response?.data));\r\n    } else {\r\n      // 18. the updated userDetails from the backend server is assigned to userDetails.\r\n      const { userDetails } = response?.data;\r\n      // then the userDetails gets STORED at the localStorage of the browser. Why? Check my blog in my website about localStorage and its functionality ;)\r\n      localStorage.setItem(\"user\", JSON.stringify(userDetails));\r\n\r\n      // Then, thanks to the redux-thunk, the dispatch method can be used at the \"setUserDetails\" function to send the ACTION OBJECT to the authReducer.\r\n      dispatch(setUserDetails(userDetails));\r\n      // 9. The user is redirected to the dashboard.\r\n      history.push(\"/dashboard\");\r\n    }\r\n  };\r\n};\r\n\r\nconst register = (userDetails, history) => {\r\n  return async (dispatch) => {\r\n    const response = await api.register(userDetails);\r\n    console.log(response);\r\n    if (response.error) {\r\n      dispatch(openAlertMessage(response?.exception?.response?.data));\r\n    } else {\r\n      const { userDetails } = response?.data;\r\n      localStorage.setItem(\"user\", JSON.stringify(userDetails));\r\n\r\n      dispatch(setUserDetails(userDetails));\r\n      history.push(\"/dashboard\");\r\n    }\r\n  };\r\n};\r\n"],"mappings":"AAAA,OAAO,KAAKA,GAAZ,MAAqB,WAArB;AACA,SAASC,gBAAT,QAAiC,gBAAjC;AAEA,OAAO,MAAMC,WAAW,GAAG;EACzBC,gBAAgB,EAAE;AADO,CAApB;AAIP,OAAO,MAAMC,UAAU,GAAIC,QAAD,IAAc;EACtC,OAAO;IACL;IACA;IACAC,KAAK,EAAE,CAACC,WAAD,EAAcC,OAAd,KAA0BH,QAAQ,CAACC,KAAK,CAACC,WAAD,EAAcC,OAAd,CAAN,CAHpC;IAILC,QAAQ,EAAE,CAACF,WAAD,EAAcC,OAAd,KACRH,QAAQ,CAACI,QAAQ,CAACF,WAAD,EAAcC,OAAd,CAAT,CALL;IAMLE,cAAc,EAAGH,WAAD,IAAiBF,QAAQ,CAACK,cAAc,CAACH,WAAD,CAAf;EANpC,CAAP;AAQD,CATM;;AAWP,MAAMG,cAAc,GAAIH,WAAD,IAAiB;EACtC;EACA,OAAO;IACLI,IAAI,EAAET,WAAW,CAACC,gBADb;IAELI;EAFK,CAAP;AAID,CAND,C,CAQA;;;AACA,MAAMD,KAAK,GAAG,CAACC,WAAD,EAAcC,OAAd,KAA0B;EACtC,OAAO,MAAOH,QAAP,IAAoB;IACzB;IACA,MAAMO,QAAQ,GAAG,MAAMZ,GAAG,CAACM,KAAJ,CAAUC,WAAV,CAAvB;IACAM,OAAO,CAACC,GAAR,CAAYF,QAAZ,EAHyB,CAIzB;;IACA,IAAIA,QAAQ,CAACG,KAAb,EAAoB;MAAA;;MAClBV,QAAQ,CAACJ,gBAAgB,CAACW,QAAD,aAACA,QAAD,8CAACA,QAAQ,CAAEI,SAAX,iFAAC,oBAAqBJ,QAAtB,0DAAC,sBAA+BK,IAAhC,CAAjB,CAAR;IACD,CAFD,MAEO;MACL;MACA,MAAM;QAAEV;MAAF,IAAkBK,QAAlB,aAAkBA,QAAlB,uBAAkBA,QAAQ,CAAEK,IAAlC,CAFK,CAGL;;MACAC,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAed,WAAf,CAA7B,EAJK,CAML;;MACAF,QAAQ,CAACK,cAAc,CAACH,WAAD,CAAf,CAAR,CAPK,CAQL;;MACAC,OAAO,CAACc,IAAR,CAAa,YAAb;IACD;EACF,CAlBD;AAmBD,CApBD;;AAsBA,MAAMb,QAAQ,GAAG,CAACF,WAAD,EAAcC,OAAd,KAA0B;EACzC,OAAO,MAAOH,QAAP,IAAoB;IACzB,MAAMO,QAAQ,GAAG,MAAMZ,GAAG,CAACS,QAAJ,CAAaF,WAAb,CAAvB;IACAM,OAAO,CAACC,GAAR,CAAYF,QAAZ;;IACA,IAAIA,QAAQ,CAACG,KAAb,EAAoB;MAAA;;MAClBV,QAAQ,CAACJ,gBAAgB,CAACW,QAAD,aAACA,QAAD,+CAACA,QAAQ,CAAEI,SAAX,kFAAC,qBAAqBJ,QAAtB,0DAAC,sBAA+BK,IAAhC,CAAjB,CAAR;IACD,CAFD,MAEO;MACL,MAAM;QAAEV;MAAF,IAAkBK,QAAlB,aAAkBA,QAAlB,uBAAkBA,QAAQ,CAAEK,IAAlC;MACAC,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAed,WAAf,CAA7B;MAEAF,QAAQ,CAACK,cAAc,CAACH,WAAD,CAAf,CAAR;MACAC,OAAO,CAACc,IAAR,CAAa,YAAb;IACD;EACF,CAZD;AAaD,CAdD"},"metadata":{},"sourceType":"module"}